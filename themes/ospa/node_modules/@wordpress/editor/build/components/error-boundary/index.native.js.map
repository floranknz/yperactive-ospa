{"version":3,"names":["_reactNative","require","_clipboard","_interopRequireDefault","_reactNativeSafeAreaContext","_element","_i18n","_data","_reactNativeBridge","_compose","_icons","_components","_store","_style","getContent","select","editorStore","getEditedPostContent","error","CopyButton","text","label","accessibilityLabel","accessibilityHint","secondary","containerStyle","usePreferredColorSchemeStyle","styles","containerSecondaryStyle","textStyle","textSecondaryStyle","_react","createElement","TouchableOpacity","activeOpacity","style","accessibilityRole","onPress","Clipboard","setString","Text","ErrorBoundary","Component","constructor","arguments","state","componentDidCatch","logException","context","component_stack","componentStack","isHandled","handledBy","getDerivedStateFromError","render","props","children","getStylesFromColorScheme","iconContainerStyle","titleStyle","messageStyle","SafeAreaView","ScrollView","contentContainerStyle","View","Icon","icon","warning","__","stack","_default","exports","default","withPreferredColorScheme"],"sources":["@wordpress/editor/src/components/error-boundary/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { ScrollView, Text, TouchableOpacity, View } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { select } from '@wordpress/data';\nimport { logException } from '@wordpress/react-native-bridge';\nimport {\n\tusePreferredColorSchemeStyle,\n\twithPreferredColorScheme,\n} from '@wordpress/compose';\nimport { warning } from '@wordpress/icons';\nimport { Icon } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\nimport styles from './style.scss';\n\nfunction getContent() {\n\ttry {\n\t\t// While `select` in a component is generally discouraged, it is\n\t\t// used here because it (a) reduces the chance of data loss in the\n\t\t// case of additional errors by performing a direct retrieval and\n\t\t// (b) avoids the performance cost associated with unnecessary\n\t\t// content serialization throughout the lifetime of a non-erroring\n\t\t// application.\n\t\treturn select( editorStore ).getEditedPostContent();\n\t} catch ( error ) {}\n}\n\nfunction CopyButton( {\n\ttext,\n\tlabel,\n\taccessibilityLabel,\n\taccessibilityHint,\n\tsecondary = false,\n} ) {\n\tconst containerStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__container' ],\n\t\tstyles[ 'copy-button__container--dark' ]\n\t);\n\n\tconst containerSecondaryStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__container--secondary' ],\n\t\tstyles[ 'copy-button__container--secondary-dark' ]\n\t);\n\n\tconst textStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__text' ],\n\t\tstyles[ 'copy-button__text--dark' ]\n\t);\n\n\tconst textSecondaryStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__text--secondary' ],\n\t\tstyles[ 'copy-button__text--secondary-dark' ]\n\t);\n\n\treturn (\n\t\t<TouchableOpacity\n\t\t\tactiveOpacity={ 0.5 }\n\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\tstyle={ [ containerStyle, secondary && containerSecondaryStyle ] }\n\t\t\taccessibilityRole={ 'button' }\n\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\tonPress={ () => {\n\t\t\t\tClipboard.setString(\n\t\t\t\t\ttypeof text === 'function' ? text() : text || ''\n\t\t\t\t);\n\t\t\t} }\n\t\t>\n\t\t\t<Text style={ [ textStyle, secondary && textSecondaryStyle ] }>\n\t\t\t\t{ label }\n\t\t\t</Text>\n\t\t</TouchableOpacity>\n\t);\n}\n\nclass ErrorBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tlogException( error, {\n\t\t\tcontext: {\n\t\t\t\tcomponent_stack: error.componentStack,\n\t\t\t},\n\t\t\tisHandled: true,\n\t\t\thandledBy: 'Editor-level Error Boundary',\n\t\t} );\n\t}\n\n\tstatic getDerivedStateFromError( error ) {\n\t\treturn { error };\n\t}\n\n\trender() {\n\t\tconst { error } = this.state;\n\t\tif ( ! error ) {\n\t\t\treturn this.props.children;\n\t\t}\n\n\t\tconst { getStylesFromColorScheme } = this.props;\n\n\t\tconst iconContainerStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__icon-container' ],\n\t\t\tstyles[ 'error-boundary__icon-container--dark' ]\n\t\t);\n\n\t\tconst titleStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__title' ],\n\t\t\tstyles[ 'error-boundary__title--dark' ]\n\t\t);\n\n\t\tconst messageStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__message' ],\n\t\t\tstyles[ 'error-boundary__message--dark' ]\n\t\t);\n\n\t\treturn (\n\t\t\t<SafeAreaView>\n\t\t\t\t<ScrollView\n\t\t\t\t\tstyle={ styles[ 'error-boundary__scroll' ] }\n\t\t\t\t\tcontentContainerStyle={\n\t\t\t\t\t\tstyles[ 'error-boundary__scroll-container' ]\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles[ 'error-boundary__container' ] }>\n\t\t\t\t\t\t<View style={ iconContainerStyle }>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ warning }\n\t\t\t\t\t\t\t\t{ ...styles[ 'error-boundary__icon' ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<Text style={ titleStyle }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'The editor has encountered an unexpected error'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Text style={ messageStyle }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'You can copy your post text in case your content is impacted. Copy error details to debug and share with support.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<View\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\tstyles[ 'error-boundary__actions-container' ]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CopyButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Copy post text' ) }\n\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t'Button to copy post text'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t\t\t'Tap here to copy post text'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttext={ getContent }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CopyButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Copy error details' ) }\n\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t'Button to copy error details'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t\t\t'Tap here to copy error details'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttext={ error.stack }\n\t\t\t\t\t\t\t\tsecondary\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t</ScrollView>\n\t\t\t</SafeAreaView>\n\t\t);\n\t}\n}\n\nexport default withPreferredColorScheme( ErrorBoundary );\n"],"mappings":"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","ignoreList":[]}