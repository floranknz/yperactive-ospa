{"version":3,"names":["BlockInspector","store","blockEditorStore","useSelect","useDispatch","Platform","useCallback","useContext","useEffect","useRef","isRTL","__","drawerLeft","drawerRight","keyboardShortcutsStore","privateApis","componentsPrivateApis","interfaceStore","PageAttributesPanel","PatternOverridesPanel","PluginDocumentSettingPanel","PluginSidebar","PostLastRevisionPanel","PostSummary","PostTaxonomiesPanel","PostTransformPanel","SidebarHeader","TemplateContentPanel","useAutoSwitchEditorSidebars","sidebars","unlock","editorStore","NAVIGATION_POST_TYPE","TEMPLATE_PART_POST_TYPE","TEMPLATE_POST_TYPE","Tabs","SIDEBAR_ACTIVE_BY_DEFAULT","select","web","native","SidebarContent","tabName","keyboardShortcut","renderingMode","onActionPerformed","extraPanels","tabListRef","tabsContextValue","Context","tabsElements","Array","from","current","querySelectorAll","selectedTabElement","find","element","getAttribute","activeElement","ownerDocument","tabsHasFocus","some","id","focus","createElement","identifier","header","Provider","value","ref","closeLabel","className","headerClassName","title","toggleShortcut","icon","isActiveByDefault","TabPanel","tabId","document","focusable","Slot","block","Sidebar","showSummary","shortcut","getShortcutRepresentation","sidebar","getActiveComplementaryArea","_isEditorSidebarOpened","includes","_tabName","getBlockSelectionStart","getCurrentPostType","getRenderingMode","enableComplementaryArea","onTabSelect","newSelectedTabId","selectedTabId","onSelect","selectOnMove"],"sources":["@wordpress/editor/src/components/sidebar/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tBlockInspector,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tPlatform,\n\tuseCallback,\n\tuseContext,\n\tuseEffect,\n\tuseRef,\n} from '@wordpress/element';\nimport { isRTL, __ } from '@wordpress/i18n';\nimport { drawerLeft, drawerRight } from '@wordpress/icons';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\nimport { store as interfaceStore } from '@wordpress/interface';\n\n/**\n * Internal dependencies\n */\nimport PageAttributesPanel from '../page-attributes/panel';\nimport PatternOverridesPanel from '../pattern-overrides-panel';\nimport PluginDocumentSettingPanel from '../plugin-document-setting-panel';\nimport PluginSidebar from '../plugin-sidebar';\nimport PostLastRevisionPanel from '../post-last-revision/panel';\nimport PostSummary from './post-summary';\nimport PostTaxonomiesPanel from '../post-taxonomies/panel';\nimport PostTransformPanel from '../post-transform-panel';\nimport SidebarHeader from './header';\nimport TemplateContentPanel from '../template-content-panel';\nimport useAutoSwitchEditorSidebars from '../provider/use-auto-switch-editor-sidebars';\nimport { sidebars } from './constants';\nimport { unlock } from '../../lock-unlock';\nimport { store as editorStore } from '../../store';\nimport {\n\tNAVIGATION_POST_TYPE,\n\tTEMPLATE_PART_POST_TYPE,\n\tTEMPLATE_POST_TYPE,\n} from '../../store/constants';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nconst SIDEBAR_ACTIVE_BY_DEFAULT = Platform.select( {\n\tweb: true,\n\tnative: false,\n} );\n\nconst SidebarContent = ( {\n\ttabName,\n\tkeyboardShortcut,\n\trenderingMode,\n\tonActionPerformed,\n\textraPanels,\n} ) => {\n\tconst tabListRef = useRef( null );\n\t// Because `PluginSidebar` renders a `ComplementaryArea`, we\n\t// need to forward the `Tabs` context so it can be passed through the\n\t// underlying slot/fill.\n\tconst tabsContextValue = useContext( Tabs.Context );\n\n\t// This effect addresses a race condition caused by tabbing from the last\n\t// block in the editor into the settings sidebar. Without this effect, the\n\t// selected tab and browser focus can become separated in an unexpected way\n\t// (e.g the \"block\" tab is focused, but the \"post\" tab is selected).\n\tuseEffect( () => {\n\t\tconst tabsElements = Array.from(\n\t\t\ttabListRef.current?.querySelectorAll( '[role=\"tab\"]' ) || []\n\t\t);\n\t\tconst selectedTabElement = tabsElements.find(\n\t\t\t// We are purposefully using a custom `data-tab-id` attribute here\n\t\t\t// because we don't want rely on any assumptions about `Tabs`\n\t\t\t// component internals.\n\t\t\t( element ) => element.getAttribute( 'data-tab-id' ) === tabName\n\t\t);\n\t\tconst activeElement = selectedTabElement?.ownerDocument.activeElement;\n\t\tconst tabsHasFocus = tabsElements.some( ( element ) => {\n\t\t\treturn activeElement && activeElement.id === element.id;\n\t\t} );\n\t\tif (\n\t\t\ttabsHasFocus &&\n\t\t\tselectedTabElement &&\n\t\t\tselectedTabElement.id !== activeElement?.id\n\t\t) {\n\t\t\tselectedTabElement?.focus();\n\t\t}\n\t}, [ tabName ] );\n\n\treturn (\n\t\t<PluginSidebar\n\t\t\tidentifier={ tabName }\n\t\t\theader={\n\t\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\n\t\t\t\t\t<SidebarHeader ref={ tabListRef } />\n\t\t\t\t</Tabs.Context.Provider>\n\t\t\t}\n\t\t\tcloseLabel={ __( 'Close Settings' ) }\n\t\t\t// This classname is added so we can apply a corrective negative\n\t\t\t// margin to the panel.\n\t\t\t// see https://github.com/WordPress/gutenberg/pull/55360#pullrequestreview-1737671049\n\t\t\tclassName=\"editor-sidebar__panel\"\n\t\t\theaderClassName=\"editor-sidebar__panel-tabs\"\n\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\ttitle={ __( 'Settings' ) }\n\t\t\ttoggleShortcut={ keyboardShortcut }\n\t\t\ticon={ isRTL() ? drawerLeft : drawerRight }\n\t\t\tisActiveByDefault={ SIDEBAR_ACTIVE_BY_DEFAULT }\n\t\t>\n\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\n\t\t\t\t<Tabs.TabPanel tabId={ sidebars.document } focusable={ false }>\n\t\t\t\t\t<PostSummary onActionPerformed={ onActionPerformed } />\n\t\t\t\t\t<PluginDocumentSettingPanel.Slot />\n\t\t\t\t\t{ renderingMode !== 'post-only' && (\n\t\t\t\t\t\t<TemplateContentPanel />\n\t\t\t\t\t) }\n\t\t\t\t\t<PostTransformPanel />\n\t\t\t\t\t<PostLastRevisionPanel />\n\t\t\t\t\t<PostTaxonomiesPanel />\n\t\t\t\t\t<PageAttributesPanel />\n\t\t\t\t\t<PatternOverridesPanel />\n\t\t\t\t\t{ extraPanels }\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t<Tabs.TabPanel tabId={ sidebars.block } focusable={ false }>\n\t\t\t\t\t<BlockInspector />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t</Tabs.Context.Provider>\n\t\t</PluginSidebar>\n\t);\n};\n\nconst Sidebar = ( { extraPanels, onActionPerformed } ) => {\n\tuseAutoSwitchEditorSidebars();\n\tconst { tabName, keyboardShortcut, showSummary, renderingMode } = useSelect(\n\t\t( select ) => {\n\t\t\tconst shortcut = select(\n\t\t\t\tkeyboardShortcutsStore\n\t\t\t).getShortcutRepresentation( 'core/editor/toggle-sidebar' );\n\n\t\t\tconst sidebar =\n\t\t\t\tselect( interfaceStore ).getActiveComplementaryArea( 'core' );\n\t\t\tconst _isEditorSidebarOpened = [\n\t\t\t\tsidebars.block,\n\t\t\t\tsidebars.document,\n\t\t\t].includes( sidebar );\n\t\t\tlet _tabName = sidebar;\n\t\t\tif ( ! _isEditorSidebarOpened ) {\n\t\t\t\t_tabName = !! select(\n\t\t\t\t\tblockEditorStore\n\t\t\t\t).getBlockSelectionStart()\n\t\t\t\t\t? sidebars.block\n\t\t\t\t\t: sidebars.document;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttabName: _tabName,\n\t\t\t\tkeyboardShortcut: shortcut,\n\t\t\t\tshowSummary: ! [\n\t\t\t\t\tTEMPLATE_POST_TYPE,\n\t\t\t\t\tTEMPLATE_PART_POST_TYPE,\n\t\t\t\t\tNAVIGATION_POST_TYPE,\n\t\t\t\t].includes( select( editorStore ).getCurrentPostType() ),\n\t\t\t\trenderingMode: select( editorStore ).getRenderingMode(),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\tconst { enableComplementaryArea } = useDispatch( interfaceStore );\n\n\tconst onTabSelect = useCallback(\n\t\t( newSelectedTabId ) => {\n\t\t\tif ( !! newSelectedTabId ) {\n\t\t\t\tenableComplementaryArea( 'core', newSelectedTabId );\n\t\t\t}\n\t\t},\n\t\t[ enableComplementaryArea ]\n\t);\n\n\treturn (\n\t\t<Tabs\n\t\t\tselectedTabId={ tabName }\n\t\t\tonSelect={ onTabSelect }\n\t\t\tselectOnMove={ false }\n\t\t>\n\t\t\t<SidebarContent\n\t\t\t\ttabName={ tabName }\n\t\t\t\tkeyboardShortcut={ keyboardShortcut }\n\t\t\t\tshowSummary={ showSummary }\n\t\t\t\trenderingMode={ renderingMode }\n\t\t\t\tonActionPerformed={ onActionPerformed }\n\t\t\t\textraPanels={ extraPanels }\n\t\t\t/>\n\t\t</Tabs>\n\t);\n};\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]}