{"version":3,"names":["_blocks","require","_blob","_hooks","_constants","_shared","parseShortcodeIds","ids","split","map","id","parseInt","updateThirdPartyTransformToGallery","block","isGalleryV2Enabled","name","attributes","images","length","innerBlocks","url","alt","createBlock","sizeSlug","linkDestination","addFilter","updateThirdPartyTransformFromGallery","toBlock","fromBlocks","from","Array","isArray","galleryBlock","find","transformedBlock","includes","transforms","type","isMultiBlock","blocks","transform","align","every","attribute","undefined","validImages","filter","image","width","height","caption","toString","tag","named","columns","link","orderby","imageIds","linkTo","LINK_DESTINATION_NONE","LINK_DESTINATION_ATTACHMENT","LINK_DESTINATION_MEDIA","randomOrder","imageId","isMatch","priority","files","file","indexOf","createBlobURL","pickRelevantMediaFiles","to","title","href","rel","linkClass","imageSizeSlug","linkTarget","anchor","className","index","_default","exports","default"],"sources":["@wordpress/block-library/src/gallery/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { createBlobURL } from '@wordpress/blob';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_NONE,\n\tLINK_DESTINATION_MEDIA,\n} from './constants';\nimport { pickRelevantMediaFiles, isGalleryV2Enabled } from './shared';\n\nconst parseShortcodeIds = ( ids ) => {\n\tif ( ! ids ) {\n\t\treturn [];\n\t}\n\n\treturn ids.split( ',' ).map( ( id ) => parseInt( id, 10 ) );\n};\n\n/**\n * Third party block plugins don't have an easy way to detect if the\n * innerBlocks version of the Gallery is running when they run a\n * 3rdPartyBlock -> GalleryBlock transform so this tranform filter\n * will handle this. Once the innerBlocks version is the default\n * in a core release, this could be deprecated and removed after\n * plugin authors have been given time to update transforms.\n *\n * @typedef  {Object} Attributes\n * @typedef  {Object} Block\n * @property {Attributes} attributes The attributes of the block.\n * @param    {Block}      block      The transformed block.\n * @return   {Block}                 The transformed block.\n */\nfunction updateThirdPartyTransformToGallery( block ) {\n\tif (\n\t\tisGalleryV2Enabled() &&\n\t\tblock.name === 'core/gallery' &&\n\t\tblock.attributes?.images.length > 0\n\t) {\n\t\tconst innerBlocks = block.attributes.images.map(\n\t\t\t( { url, id, alt } ) => {\n\t\t\t\treturn createBlock( 'core/image', {\n\t\t\t\t\turl,\n\t\t\t\t\tid: id ? parseInt( id, 10 ) : null,\n\t\t\t\t\talt,\n\t\t\t\t\tsizeSlug: block.attributes.sizeSlug,\n\t\t\t\t\tlinkDestination: block.attributes.linkDestination,\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\n\t\tdelete block.attributes.ids;\n\t\tdelete block.attributes.images;\n\t\tblock.innerBlocks = innerBlocks;\n\t}\n\n\treturn block;\n}\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/gallery/update-third-party-transform-to',\n\tupdateThirdPartyTransformToGallery\n);\n\n/**\n * Third party block plugins don't have an easy way to detect if the\n * innerBlocks version of the Gallery is running when they run a\n * GalleryBlock -> 3rdPartyBlock transform so this transform filter\n * will handle this. Once the innerBlocks version is the default\n * in a core release, this could be deprecated and removed after\n * plugin authors have been given time to update transforms.\n *\n * @typedef  {Object} Attributes\n * @typedef  {Object} Block\n * @property {Attributes} attributes The attributes of the block.\n * @param    {Block}      toBlock    The block to transform to.\n * @param    {Block[]}    fromBlocks The blocks to transform from.\n * @return   {Block}                 The transformed block.\n */\nfunction updateThirdPartyTransformFromGallery( toBlock, fromBlocks ) {\n\tconst from = Array.isArray( fromBlocks ) ? fromBlocks : [ fromBlocks ];\n\tconst galleryBlock = from.find(\n\t\t( transformedBlock ) =>\n\t\t\ttransformedBlock.name === 'core/gallery' &&\n\t\t\ttransformedBlock.innerBlocks.length > 0 &&\n\t\t\t! transformedBlock.attributes.images?.length > 0 &&\n\t\t\t! toBlock.name.includes( 'core/' )\n\t);\n\n\tif ( galleryBlock ) {\n\t\tconst images = galleryBlock.innerBlocks.map(\n\t\t\t( { attributes: { url, id, alt } } ) => ( {\n\t\t\t\turl,\n\t\t\t\tid: id ? parseInt( id, 10 ) : null,\n\t\t\t\talt,\n\t\t\t} )\n\t\t);\n\t\tconst ids = images.map( ( { id } ) => id );\n\t\tgalleryBlock.attributes.images = images;\n\t\tgalleryBlock.attributes.ids = ids;\n\t}\n\n\treturn toBlock;\n}\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/gallery/update-third-party-transform-from',\n\tupdateThirdPartyTransformFromGallery\n);\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/image' ],\n\t\t\ttransform: ( attributes ) => {\n\t\t\t\t// Init the align and size from the first item which may be either the placeholder or an image.\n\t\t\t\tlet { align, sizeSlug } = attributes[ 0 ];\n\t\t\t\t// Loop through all the images and check if they have the same align and size.\n\t\t\t\talign = attributes.every(\n\t\t\t\t\t( attribute ) => attribute.align === align\n\t\t\t\t)\n\t\t\t\t\t? align\n\t\t\t\t\t: undefined;\n\t\t\t\tsizeSlug = attributes.every(\n\t\t\t\t\t( attribute ) => attribute.sizeSlug === sizeSlug\n\t\t\t\t)\n\t\t\t\t\t? sizeSlug\n\t\t\t\t\t: undefined;\n\n\t\t\t\tconst validImages = attributes.filter( ( { url } ) => url );\n\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tconst innerBlocks = validImages.map( ( image ) => {\n\t\t\t\t\t\t// Gallery images can't currently be resized so make sure height and width are undefined.\n\t\t\t\t\t\timage.width = undefined;\n\t\t\t\t\t\timage.height = undefined;\n\t\t\t\t\t\treturn createBlock( 'core/image', image );\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\t'core/gallery',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\tsizeSlug,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinnerBlocks\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn createBlock( 'core/gallery', {\n\t\t\t\t\timages: validImages.map(\n\t\t\t\t\t\t( { id, url, alt, caption } ) => ( {\n\t\t\t\t\t\t\tid: id.toString(),\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\t\tids: validImages.map( ( { id } ) => parseInt( id, 10 ) ),\n\t\t\t\t\talign,\n\t\t\t\t\tsizeSlug,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'shortcode',\n\t\t\ttag: 'gallery',\n\t\t\ttransform( { named: { ids, columns = 3, link, orderby } } ) {\n\t\t\t\tconst imageIds = parseShortcodeIds( ids ).map( ( id ) =>\n\t\t\t\t\tparseInt( id, 10 )\n\t\t\t\t);\n\n\t\t\t\tlet linkTo = LINK_DESTINATION_NONE;\n\t\t\t\tif ( link === 'post' ) {\n\t\t\t\t\tlinkTo = LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t} else if ( link === 'file' ) {\n\t\t\t\t\tlinkTo = LINK_DESTINATION_MEDIA;\n\t\t\t\t}\n\n\t\t\t\tconst galleryBlock = createBlock(\n\t\t\t\t\t'core/gallery',\n\t\t\t\t\t{\n\t\t\t\t\t\tcolumns: parseInt( columns, 10 ),\n\t\t\t\t\t\tlinkTo,\n\t\t\t\t\t\trandomOrder: orderby === 'rand',\n\t\t\t\t\t},\n\t\t\t\t\timageIds.map( ( imageId ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', { id: imageId } )\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\treturn galleryBlock;\n\t\t\t},\n\t\t\tisMatch( { named } ) {\n\t\t\t\treturn undefined !== named.ids;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\t// When created by drag and dropping multiple files on an insertion point. Because multiple\n\t\t\t// files must not be transformed to a gallery when dropped within a gallery there is another transform\n\t\t\t// within the image block to handle that case. Therefore this transform has to have priority 1\n\t\t\t// set so that it overrrides the image block transformation when mulitple images are dropped outside\n\t\t\t// of a gallery block.\n\t\t\ttype: 'files',\n\t\t\tpriority: 1,\n\t\t\tisMatch( files ) {\n\t\t\t\treturn (\n\t\t\t\t\tfiles.length !== 1 &&\n\t\t\t\t\tfiles.every(\n\t\t\t\t\t\t( file ) => file.type.indexOf( 'image/' ) === 0\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t},\n\t\t\ttransform( files ) {\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tconst innerBlocks = files.map( ( file ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t\treturn createBlock( 'core/gallery', {}, innerBlocks );\n\t\t\t\t}\n\t\t\t\tconst block = createBlock( 'core/gallery', {\n\t\t\t\t\timages: files.map( ( file ) =>\n\t\t\t\t\t\tpickRelevantMediaFiles( {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t\treturn block;\n\t\t\t},\n\t\t},\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/image' ],\n\t\t\ttransform: ( { align, images, ids, sizeSlug }, innerBlocks ) => {\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tif ( innerBlocks.length > 0 ) {\n\t\t\t\t\t\treturn innerBlocks.map(\n\t\t\t\t\t\t\t( {\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t\t\trel,\n\t\t\t\t\t\t\t\t\tlinkClass,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tsizeSlug: imageSizeSlug,\n\t\t\t\t\t\t\t\t\tlinkDestination,\n\t\t\t\t\t\t\t\t\tlinkTarget,\n\t\t\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} ) =>\n\t\t\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t\t\trel,\n\t\t\t\t\t\t\t\t\tlinkClass,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tsizeSlug: imageSizeSlug,\n\t\t\t\t\t\t\t\t\tlinkDestination,\n\t\t\t\t\t\t\t\t\tlinkTarget,\n\t\t\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn createBlock( 'core/image', { align } );\n\t\t\t\t}\n\t\t\t\tif ( images.length > 0 ) {\n\t\t\t\t\treturn images.map( ( { url, alt, caption }, index ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\tid: ids[ index ],\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\tsizeSlug,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn createBlock( 'core/image', { align } );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"],"mappings":"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","ignoreList":[]}