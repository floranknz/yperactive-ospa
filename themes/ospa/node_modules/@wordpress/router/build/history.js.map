{"version":3,"names":["_history","require","_url","history","createBrowserHistory","originalHistoryPush","push","originalHistoryReplace","replace","preserveThemePreview","params","hasOwnProperty","currentSearch","URLSearchParams","location","search","currentThemePreview","get","wp_theme_preview","state","buildQueryString","call","_default","exports","default"],"sources":["@wordpress/router/src/history.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { createBrowserHistory } from 'history';\n\n/**\n * WordPress dependencies\n */\nimport { buildQueryString } from '@wordpress/url';\n\nconst history = createBrowserHistory();\n\nconst originalHistoryPush = history.push;\nconst originalHistoryReplace = history.replace;\n\n// Preserve the `wp_theme_preview` query parameter when navigating\n// around the Site Editor.\n// TODO: move this hack out of the router into Site Editor code.\nfunction preserveThemePreview( params ) {\n\tif ( params.hasOwnProperty( 'wp_theme_preview' ) ) {\n\t\treturn params;\n\t}\n\tconst currentSearch = new URLSearchParams( history.location.search );\n\tconst currentThemePreview = currentSearch.get( 'wp_theme_preview' );\n\tif ( currentThemePreview === null ) {\n\t\treturn params;\n\t}\n\treturn { ...params, wp_theme_preview: currentThemePreview };\n}\n\nfunction push( params, state ) {\n\tconst search = buildQueryString( preserveThemePreview( params ) );\n\treturn originalHistoryPush.call( history, { search }, state );\n}\n\nfunction replace( params, state ) {\n\tconst search = buildQueryString( preserveThemePreview( params ) );\n\treturn originalHistoryReplace.call( history, { search }, state );\n}\n\nhistory.push = push;\nhistory.replace = replace;\n\nexport default history;\n"],"mappings":";;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AAKA,IAAAC,IAAA,GAAAD,OAAA;AARA;AACA;AACA;;AAGA;AACA;AACA;;AAGA,MAAME,OAAO,GAAG,IAAAC,6BAAoB,EAAC,CAAC;AAEtC,MAAMC,mBAAmB,GAAGF,OAAO,CAACG,IAAI;AACxC,MAAMC,sBAAsB,GAAGJ,OAAO,CAACK,OAAO;;AAE9C;AACA;AACA;AACA,SAASC,oBAAoBA,CAAEC,MAAM,EAAG;EACvC,IAAKA,MAAM,CAACC,cAAc,CAAE,kBAAmB,CAAC,EAAG;IAClD,OAAOD,MAAM;EACd;EACA,MAAME,aAAa,GAAG,IAAIC,eAAe,CAAEV,OAAO,CAACW,QAAQ,CAACC,MAAO,CAAC;EACpE,MAAMC,mBAAmB,GAAGJ,aAAa,CAACK,GAAG,CAAE,kBAAmB,CAAC;EACnE,IAAKD,mBAAmB,KAAK,IAAI,EAAG;IACnC,OAAON,MAAM;EACd;EACA,OAAO;IAAE,GAAGA,MAAM;IAAEQ,gBAAgB,EAAEF;EAAoB,CAAC;AAC5D;AAEA,SAASV,IAAIA,CAAEI,MAAM,EAAES,KAAK,EAAG;EAC9B,MAAMJ,MAAM,GAAG,IAAAK,qBAAgB,EAAEX,oBAAoB,CAAEC,MAAO,CAAE,CAAC;EACjE,OAAOL,mBAAmB,CAACgB,IAAI,CAAElB,OAAO,EAAE;IAAEY;EAAO,CAAC,EAAEI,KAAM,CAAC;AAC9D;AAEA,SAASX,OAAOA,CAAEE,MAAM,EAAES,KAAK,EAAG;EACjC,MAAMJ,MAAM,GAAG,IAAAK,qBAAgB,EAAEX,oBAAoB,CAAEC,MAAO,CAAE,CAAC;EACjE,OAAOH,sBAAsB,CAACc,IAAI,CAAElB,OAAO,EAAE;IAAEY;EAAO,CAAC,EAAEI,KAAM,CAAC;AACjE;AAEAhB,OAAO,CAACG,IAAI,GAAGA,IAAI;AACnBH,OAAO,CAACK,OAAO,GAAGA,OAAO;AAAC,IAAAc,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEXrB,OAAO","ignoreList":[]}