{"version":3,"names":["createBrowserHistory","buildQueryString","history","originalHistoryPush","push","originalHistoryReplace","replace","preserveThemePreview","params","hasOwnProperty","currentSearch","URLSearchParams","location","search","currentThemePreview","get","wp_theme_preview","state","call"],"sources":["@wordpress/router/src/history.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { createBrowserHistory } from 'history';\n\n/**\n * WordPress dependencies\n */\nimport { buildQueryString } from '@wordpress/url';\n\nconst history = createBrowserHistory();\n\nconst originalHistoryPush = history.push;\nconst originalHistoryReplace = history.replace;\n\n// Preserve the `wp_theme_preview` query parameter when navigating\n// around the Site Editor.\n// TODO: move this hack out of the router into Site Editor code.\nfunction preserveThemePreview( params ) {\n\tif ( params.hasOwnProperty( 'wp_theme_preview' ) ) {\n\t\treturn params;\n\t}\n\tconst currentSearch = new URLSearchParams( history.location.search );\n\tconst currentThemePreview = currentSearch.get( 'wp_theme_preview' );\n\tif ( currentThemePreview === null ) {\n\t\treturn params;\n\t}\n\treturn { ...params, wp_theme_preview: currentThemePreview };\n}\n\nfunction push( params, state ) {\n\tconst search = buildQueryString( preserveThemePreview( params ) );\n\treturn originalHistoryPush.call( history, { search }, state );\n}\n\nfunction replace( params, state ) {\n\tconst search = buildQueryString( preserveThemePreview( params ) );\n\treturn originalHistoryReplace.call( history, { search }, state );\n}\n\nhistory.push = push;\nhistory.replace = replace;\n\nexport default history;\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,oBAAoB,QAAQ,SAAS;;AAE9C;AACA;AACA;AACA,SAASC,gBAAgB,QAAQ,gBAAgB;AAEjD,MAAMC,OAAO,GAAGF,oBAAoB,CAAC,CAAC;AAEtC,MAAMG,mBAAmB,GAAGD,OAAO,CAACE,IAAI;AACxC,MAAMC,sBAAsB,GAAGH,OAAO,CAACI,OAAO;;AAE9C;AACA;AACA;AACA,SAASC,oBAAoBA,CAAEC,MAAM,EAAG;EACvC,IAAKA,MAAM,CAACC,cAAc,CAAE,kBAAmB,CAAC,EAAG;IAClD,OAAOD,MAAM;EACd;EACA,MAAME,aAAa,GAAG,IAAIC,eAAe,CAAET,OAAO,CAACU,QAAQ,CAACC,MAAO,CAAC;EACpE,MAAMC,mBAAmB,GAAGJ,aAAa,CAACK,GAAG,CAAE,kBAAmB,CAAC;EACnE,IAAKD,mBAAmB,KAAK,IAAI,EAAG;IACnC,OAAON,MAAM;EACd;EACA,OAAO;IAAE,GAAGA,MAAM;IAAEQ,gBAAgB,EAAEF;EAAoB,CAAC;AAC5D;AAEA,SAASV,IAAIA,CAAEI,MAAM,EAAES,KAAK,EAAG;EAC9B,MAAMJ,MAAM,GAAGZ,gBAAgB,CAAEM,oBAAoB,CAAEC,MAAO,CAAE,CAAC;EACjE,OAAOL,mBAAmB,CAACe,IAAI,CAAEhB,OAAO,EAAE;IAAEW;EAAO,CAAC,EAAEI,KAAM,CAAC;AAC9D;AAEA,SAASX,OAAOA,CAAEE,MAAM,EAAES,KAAK,EAAG;EACjC,MAAMJ,MAAM,GAAGZ,gBAAgB,CAAEM,oBAAoB,CAAEC,MAAO,CAAE,CAAC;EACjE,OAAOH,sBAAsB,CAACa,IAAI,CAAEhB,OAAO,EAAE;IAAEW;EAAO,CAAC,EAAEI,KAAM,CAAC;AACjE;AAEAf,OAAO,CAACE,IAAI,GAAGA,IAAI;AACnBF,OAAO,CAACI,OAAO,GAAGA,OAAO;AAEzB,eAAeJ,OAAO","ignoreList":[]}