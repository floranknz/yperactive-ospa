{"version":3,"names":["_preact","require","_hooks","_deepsignal","_utils","_hooks2","_kebabToCamelcase","_warn","contextAssignedObjects","WeakMap","contextObjectToProxy","contextProxyToObject","contextObjectToFallback","isPlainObject","item","Boolean","constructor","Object","descriptor","Reflect","getOwnPropertyDescriptor","proxifyContext","current","inherited","set","has","proxy","Proxy","get","target","k","fallback","currentProp","peek","value","obj","Set","add","innerValue","ownKeys","keys","updateSignals","source","deepClone","fromEntries","entries","map","key","Array","isArray","i","newRule","ruleClean","ruleNewline","empty","cssStringToObject","val","tree","block","left","exec","replace","shift","trim","unshift","getGlobalEventDirective","type","directives","evaluate","filter","suffix","forEach","entry","eventName","split","useInit","cb","event","globalVar","window","document","addEventListener","removeEventListener","_default","directive","context","props","children","inheritedContext","Provider","inheritedValue","useContext","currentValue","useRef","deepSignal","defaultEntry","find","contextStack","useMemo","namespace","warn","h","priority","watch","useWatch","init","on","element","events","Map","eventType","class","classNames","className","result","currentClass","classFinder","RegExp","test","ref","classList","remove","style","styleProp","removeProperty","bind","attribute","el","cssText","undefined","err","setAttribute","removeAttribute","Type","innerHTML","rest","cached","dangerouslySetInnerHTML","__html","text","toString","e","run","each","eachKey","list","itemProp","kebabToCamelCase","itemContext","mergedContext","scope","getScope","getEvaluate","content","exports","default"],"sources":["@wordpress/interactivity/src/directives.tsx"],"sourcesContent":["// eslint-disable-next-line eslint-comments/disable-enable-pair\n/* eslint-disable react-hooks/exhaustive-deps */\n\n/* @jsx createElement */\n\n/**\n * External dependencies\n */\nimport { h as createElement, type RefObject } from 'preact';\nimport { useContext, useMemo, useRef } from 'preact/hooks';\nimport { deepSignal, peek, type DeepSignal } from 'deepsignal';\n\n/**\n * Internal dependencies\n */\nimport { useWatch, useInit } from './utils';\nimport { directive, getScope, getEvaluate } from './hooks';\nimport { kebabToCamelCase } from './utils/kebab-to-camelcase';\nimport { warn } from './utils/warn';\n\n// Assigned objects should be ignore during proxification.\nconst contextAssignedObjects = new WeakMap();\n\n// Store the context proxy and fallback for each object in the context.\nconst contextObjectToProxy = new WeakMap();\nconst contextProxyToObject = new WeakMap();\nconst contextObjectToFallback = new WeakMap();\n\nconst isPlainObject = ( item: unknown ): boolean =>\n\tBoolean( item && typeof item === 'object' && item.constructor === Object );\n\nconst descriptor = Reflect.getOwnPropertyDescriptor;\n\n/**\n * Wrap a context object with a proxy to reproduce the context stack. The proxy\n * uses the passed `inherited` context as a fallback to look up for properties\n * that don't exist in the given context. Also, updated properties are modified\n * where they are defined, or added to the main context when they don't exist.\n *\n * By default, all plain objects inside the context are wrapped, unless it is\n * listed in the `ignore` option.\n *\n * @param current   Current context.\n * @param inherited Inherited context, used as fallback.\n *\n * @return The wrapped context object.\n */\nconst proxifyContext = ( current: object, inherited: object = {} ): object => {\n\t// Update the fallback object reference when it changes.\n\tcontextObjectToFallback.set( current, inherited );\n\tif ( ! contextObjectToProxy.has( current ) ) {\n\t\tconst proxy = new Proxy( current, {\n\t\t\tget: ( target: DeepSignal< any >, k ) => {\n\t\t\t\tconst fallback = contextObjectToFallback.get( current );\n\t\t\t\t// Always subscribe to prop changes in the current context.\n\t\t\t\tconst currentProp = target[ k ];\n\n\t\t\t\t// Return the inherited prop when missing in target.\n\t\t\t\tif ( ! ( k in target ) && k in fallback ) {\n\t\t\t\t\treturn fallback[ k ];\n\t\t\t\t}\n\n\t\t\t\t// Proxify plain objects that were not directly assigned.\n\t\t\t\tif (\n\t\t\t\t\tk in target &&\n\t\t\t\t\t! contextAssignedObjects.get( target )?.has( k ) &&\n\t\t\t\t\tisPlainObject( peek( target, k ) )\n\t\t\t\t) {\n\t\t\t\t\treturn proxifyContext( currentProp, fallback[ k ] );\n\t\t\t\t}\n\n\t\t\t\t// Return the stored proxy for `currentProp` when it exists.\n\t\t\t\tif ( contextObjectToProxy.has( currentProp ) ) {\n\t\t\t\t\treturn contextObjectToProxy.get( currentProp );\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * For other cases, return the value from target, also\n\t\t\t\t * subscribing to changes in the parent context when the current\n\t\t\t\t * prop is not defined.\n\t\t\t\t */\n\t\t\t\treturn k in target ? currentProp : fallback[ k ];\n\t\t\t},\n\t\t\tset: ( target, k, value ) => {\n\t\t\t\tconst fallback = contextObjectToFallback.get( current );\n\t\t\t\tconst obj =\n\t\t\t\t\tk in target || ! ( k in fallback ) ? target : fallback;\n\n\t\t\t\t/*\n\t\t\t\t * Assigned object values should not be proxified so they point\n\t\t\t\t * to the original object and don't inherit unexpected\n\t\t\t\t * properties.\n\t\t\t\t */\n\t\t\t\tif ( value && typeof value === 'object' ) {\n\t\t\t\t\tif ( ! contextAssignedObjects.has( obj ) ) {\n\t\t\t\t\t\tcontextAssignedObjects.set( obj, new Set() );\n\t\t\t\t\t}\n\t\t\t\t\tcontextAssignedObjects.get( obj ).add( k );\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * When the value is a proxy, it's because it comes from the\n\t\t\t\t * context, so the inner value is assigned instead.\n\t\t\t\t */\n\t\t\t\tif ( contextProxyToObject.has( value ) ) {\n\t\t\t\t\tconst innerValue = contextProxyToObject.get( value );\n\t\t\t\t\tobj[ k ] = innerValue;\n\t\t\t\t} else {\n\t\t\t\t\tobj[ k ] = value;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\townKeys: ( target ) => [\n\t\t\t\t...new Set( [\n\t\t\t\t\t...Object.keys( contextObjectToFallback.get( current ) ),\n\t\t\t\t\t...Object.keys( target ),\n\t\t\t\t] ),\n\t\t\t],\n\t\t\tgetOwnPropertyDescriptor: ( target, k ) =>\n\t\t\t\tdescriptor( target, k ) ||\n\t\t\t\tdescriptor( contextObjectToFallback.get( current ), k ),\n\t\t} );\n\t\tcontextObjectToProxy.set( current, proxy );\n\t\tcontextProxyToObject.set( proxy, current );\n\t}\n\treturn contextObjectToProxy.get( current );\n};\n\n/**\n * Recursively update values within a deepSignal object.\n *\n * @param target A deepSignal instance.\n * @param source Object with properties to update in `target`.\n */\nconst updateSignals = (\n\ttarget: DeepSignal< any >,\n\tsource: DeepSignal< any >\n) => {\n\tfor ( const k in source ) {\n\t\tif (\n\t\t\tisPlainObject( peek( target, k ) ) &&\n\t\t\tisPlainObject( peek( source, k ) )\n\t\t) {\n\t\t\tupdateSignals( target[ `$${ k }` ].peek(), source[ k ] );\n\t\t} else {\n\t\t\ttarget[ k ] = source[ k ];\n\t\t}\n\t}\n};\n\n/**\n * Recursively clone the passed object.\n *\n * @param source Source object.\n * @return Cloned object.\n */\nfunction deepClone< T >( source: T ): T {\n\tif ( isPlainObject( source ) ) {\n\t\treturn Object.fromEntries(\n\t\t\tObject.entries( source as object ).map( ( [ key, value ] ) => [\n\t\t\t\tkey,\n\t\t\t\tdeepClone( value ),\n\t\t\t] )\n\t\t) as T;\n\t}\n\tif ( Array.isArray( source ) ) {\n\t\treturn source.map( ( i ) => deepClone( i ) ) as T;\n\t}\n\treturn source;\n}\n\nconst newRule =\n\t/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g;\nconst ruleClean = /\\/\\*[^]*?\\*\\/|  +/g;\nconst ruleNewline = /\\n+/g;\nconst empty = ' ';\n\n/**\n * Convert a css style string into a object.\n *\n * Made by Cristian Bote (@cristianbote) for Goober.\n * https://unpkg.com/browse/goober@2.1.13/src/core/astish.js\n *\n * @param val CSS string.\n * @return CSS object.\n */\nconst cssStringToObject = (\n\tval: string\n): Record< string, string | number > => {\n\tconst tree = [ {} ];\n\tlet block, left;\n\n\twhile ( ( block = newRule.exec( val.replace( ruleClean, '' ) ) ) ) {\n\t\tif ( block[ 4 ] ) {\n\t\t\ttree.shift();\n\t\t} else if ( block[ 3 ] ) {\n\t\t\tleft = block[ 3 ].replace( ruleNewline, empty ).trim();\n\t\t\ttree.unshift( ( tree[ 0 ][ left ] = tree[ 0 ][ left ] || {} ) );\n\t\t} else {\n\t\t\ttree[ 0 ][ block[ 1 ] ] = block[ 2 ]\n\t\t\t\t.replace( ruleNewline, empty )\n\t\t\t\t.trim();\n\t\t}\n\t}\n\n\treturn tree[ 0 ];\n};\n\n/**\n * Creates a directive that adds an event listener to the global window or\n * document object.\n *\n * @param type 'window' or 'document'\n */\nconst getGlobalEventDirective = ( type: 'window' | 'document' ) => {\n\treturn ( { directives, evaluate } ) => {\n\t\tdirectives[ `on-${ type }` ]\n\t\t\t.filter( ( { suffix } ) => suffix !== 'default' )\n\t\t\t.forEach( ( entry ) => {\n\t\t\t\tconst eventName = entry.suffix.split( '--', 1 )[ 0 ];\n\t\t\t\tuseInit( () => {\n\t\t\t\t\tconst cb = ( event ) => evaluate( entry, event );\n\t\t\t\t\tconst globalVar = type === 'window' ? window : document;\n\t\t\t\t\tglobalVar.addEventListener( eventName, cb );\n\t\t\t\t\treturn () => globalVar.removeEventListener( eventName, cb );\n\t\t\t\t} );\n\t\t\t} );\n\t};\n};\n\nexport default () => {\n\t// data-wp-context\n\tdirective(\n\t\t'context',\n\t\t( {\n\t\t\tdirectives: { context },\n\t\t\tprops: { children },\n\t\t\tcontext: inheritedContext,\n\t\t} ) => {\n\t\t\tconst { Provider } = inheritedContext;\n\t\t\tconst inheritedValue = useContext( inheritedContext );\n\t\t\tconst currentValue = useRef( deepSignal( {} ) );\n\t\t\tconst defaultEntry = context.find(\n\t\t\t\t( { suffix } ) => suffix === 'default'\n\t\t\t);\n\n\t\t\t// No change should be made if `defaultEntry` does not exist.\n\t\t\tconst contextStack = useMemo( () => {\n\t\t\t\tif ( defaultEntry ) {\n\t\t\t\t\tconst { namespace, value } = defaultEntry;\n\t\t\t\t\t// Check that the value is a JSON object. Send a console warning if not.\n\t\t\t\t\tif ( ! isPlainObject( value ) ) {\n\t\t\t\t\t\twarn(\n\t\t\t\t\t\t\t`The value of data-wp-context in \"${ namespace }\" store must be a valid stringified JSON object.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tupdateSignals( currentValue.current, {\n\t\t\t\t\t\t[ namespace ]: deepClone( value ),\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn proxifyContext( currentValue.current, inheritedValue );\n\t\t\t}, [ defaultEntry, inheritedValue ] );\n\n\t\t\treturn <Provider value={ contextStack }>{ children }</Provider>;\n\t\t},\n\t\t{ priority: 5 }\n\t);\n\n\t// data-wp-watch--[name]\n\tdirective( 'watch', ( { directives: { watch }, evaluate } ) => {\n\t\twatch.forEach( ( entry ) => {\n\t\t\tuseWatch( () => evaluate( entry ) );\n\t\t} );\n\t} );\n\n\t// data-wp-init--[name]\n\tdirective( 'init', ( { directives: { init }, evaluate } ) => {\n\t\tinit.forEach( ( entry ) => {\n\t\t\t// TODO: Replace with useEffect to prevent unneeded scopes.\n\t\t\tuseInit( () => evaluate( entry ) );\n\t\t} );\n\t} );\n\n\t// data-wp-on--[event]\n\tdirective( 'on', ( { directives: { on }, element, evaluate } ) => {\n\t\tconst events = new Map();\n\t\ton.filter( ( { suffix } ) => suffix !== 'default' ).forEach(\n\t\t\t( entry ) => {\n\t\t\t\tconst event = entry.suffix.split( '--' )[ 0 ];\n\t\t\t\tif ( ! events.has( event ) ) {\n\t\t\t\t\tevents.set( event, new Set() );\n\t\t\t\t}\n\t\t\t\tevents.get( event ).add( entry );\n\t\t\t}\n\t\t);\n\n\t\tevents.forEach( ( entries, eventType ) => {\n\t\t\telement.props[ `on${ eventType }` ] = ( event ) => {\n\t\t\t\tentries.forEach( ( entry ) => {\n\t\t\t\t\tevaluate( entry, event );\n\t\t\t\t} );\n\t\t\t};\n\t\t} );\n\t} );\n\n\t// data-wp-on-window--[event]\n\tdirective( 'on-window', getGlobalEventDirective( 'window' ) );\n\t// data-wp-on-document--[event]\n\tdirective( 'on-document', getGlobalEventDirective( 'document' ) );\n\n\t// data-wp-class--[classname]\n\tdirective(\n\t\t'class',\n\t\t( { directives: { class: classNames }, element, evaluate } ) => {\n\t\t\tclassNames\n\t\t\t\t.filter( ( { suffix } ) => suffix !== 'default' )\n\t\t\t\t.forEach( ( entry ) => {\n\t\t\t\t\tconst className = entry.suffix;\n\t\t\t\t\tconst result = evaluate( entry );\n\t\t\t\t\tconst currentClass = element.props.class || '';\n\t\t\t\t\tconst classFinder = new RegExp(\n\t\t\t\t\t\t`(^|\\\\s)${ className }(\\\\s|$)`,\n\t\t\t\t\t\t'g'\n\t\t\t\t\t);\n\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t.replace( classFinder, ' ' )\n\t\t\t\t\t\t\t.trim();\n\t\t\t\t\t} else if ( ! classFinder.test( currentClass ) ) {\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t? `${ currentClass } ${ className }`\n\t\t\t\t\t\t\t: className;\n\t\t\t\t\t}\n\n\t\t\t\t\tuseInit( () => {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * This seems necessary because Preact doesn't change the class\n\t\t\t\t\t\t * names on the hydration, so we have to do it manually. It doesn't\n\t\t\t\t\t\t * need deps because it only needs to do it the first time.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\telement.ref as RefObject< HTMLElement >\n\t\t\t\t\t\t\t ).current!.classList.remove( className );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\telement.ref as RefObject< HTMLElement >\n\t\t\t\t\t\t\t ).current!.classList.add( className );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-style--[style-prop]\n\tdirective( 'style', ( { directives: { style }, element, evaluate } ) => {\n\t\tstyle\n\t\t\t.filter( ( { suffix } ) => suffix !== 'default' )\n\t\t\t.forEach( ( entry ) => {\n\t\t\t\tconst styleProp = entry.suffix;\n\t\t\t\tconst result = evaluate( entry );\n\t\t\t\telement.props.style = element.props.style || {};\n\t\t\t\tif ( typeof element.props.style === 'string' ) {\n\t\t\t\t\telement.props.style = cssStringToObject(\n\t\t\t\t\t\telement.props.style\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif ( ! result ) {\n\t\t\t\t\tdelete element.props.style[ styleProp ];\n\t\t\t\t} else {\n\t\t\t\t\telement.props.style[ styleProp ] = result;\n\t\t\t\t}\n\n\t\t\t\tuseInit( () => {\n\t\t\t\t\t/*\n\t\t\t\t\t * This seems necessary because Preact doesn't change the styles on\n\t\t\t\t\t * the hydration, so we have to do it manually. It doesn't need deps\n\t\t\t\t\t * because it only needs to do it the first time.\n\t\t\t\t\t */\n\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\telement.ref as RefObject< HTMLElement >\n\t\t\t\t\t\t ).current!.style.removeProperty( styleProp );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\telement.ref as RefObject< HTMLElement >\n\t\t\t\t\t\t ).current!.style[ styleProp ] = result;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t} );\n\n\t// data-wp-bind--[attribute]\n\tdirective( 'bind', ( { directives: { bind }, element, evaluate } ) => {\n\t\tbind.filter( ( { suffix } ) => suffix !== 'default' ).forEach(\n\t\t\t( entry ) => {\n\t\t\t\tconst attribute = entry.suffix;\n\t\t\t\tconst result = evaluate( entry );\n\t\t\t\telement.props[ attribute ] = result;\n\n\t\t\t\t/*\n\t\t\t\t * This is necessary because Preact doesn't change the attributes on the\n\t\t\t\t * hydration, so we have to do it manually. It only needs to do it the\n\t\t\t\t * first time. After that, Preact will handle the changes.\n\t\t\t\t */\n\t\t\t\tuseInit( () => {\n\t\t\t\t\tconst el = ( element.ref as RefObject< HTMLElement > )\n\t\t\t\t\t\t.current!;\n\n\t\t\t\t\t/*\n\t\t\t\t\t * We set the value directly to the corresponding HTMLElement instance\n\t\t\t\t\t * property excluding the following special cases. We follow Preact's\n\t\t\t\t\t * logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L110-L129\n\t\t\t\t\t */\n\t\t\t\t\tif ( attribute === 'style' ) {\n\t\t\t\t\t\tif ( typeof result === 'string' ) {\n\t\t\t\t\t\t\tel.style.cssText = result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tattribute !== 'width' &&\n\t\t\t\t\t\tattribute !== 'height' &&\n\t\t\t\t\t\tattribute !== 'href' &&\n\t\t\t\t\t\tattribute !== 'list' &&\n\t\t\t\t\t\tattribute !== 'form' &&\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * The value for `tabindex` follows the parsing rules for an\n\t\t\t\t\t\t * integer. If that fails, or if the attribute isn't present, then\n\t\t\t\t\t\t * the browsers should \"follow platform conventions to determine if\n\t\t\t\t\t\t * the element should be considered as a focusable area\",\n\t\t\t\t\t\t * practically meaning that most elements get a default of `-1` (not\n\t\t\t\t\t\t * focusable), but several also get a default of `0` (focusable in\n\t\t\t\t\t\t * order after all elements with a positive `tabindex` value).\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * @see https://html.spec.whatwg.org/#tabindex-value\n\t\t\t\t\t\t */\n\t\t\t\t\t\tattribute !== 'tabIndex' &&\n\t\t\t\t\t\tattribute !== 'download' &&\n\t\t\t\t\t\tattribute !== 'rowSpan' &&\n\t\t\t\t\t\tattribute !== 'colSpan' &&\n\t\t\t\t\t\tattribute !== 'role' &&\n\t\t\t\t\t\tattribute in el\n\t\t\t\t\t) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tel[ attribute ] =\n\t\t\t\t\t\t\t\tresult === null || result === undefined\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: result;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} catch ( err ) {}\n\t\t\t\t\t}\n\t\t\t\t\t/*\n\t\t\t\t\t * aria- and data- attributes have no boolean representation.\n\t\t\t\t\t * A `false` value is different from the attribute not being\n\t\t\t\t\t * present, so we can't remove it.\n\t\t\t\t\t * We follow Preact's logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L131C24-L136\n\t\t\t\t\t */\n\t\t\t\t\tif (\n\t\t\t\t\t\tresult !== null &&\n\t\t\t\t\t\tresult !== undefined &&\n\t\t\t\t\t\t( result !== false || attribute[ 4 ] === '-' )\n\t\t\t\t\t) {\n\t\t\t\t\t\tel.setAttribute( attribute, result );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.removeAttribute( attribute );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\t} );\n\n\t// data-wp-ignore\n\tdirective(\n\t\t'ignore',\n\t\t( {\n\t\t\telement: {\n\t\t\t\ttype: Type,\n\t\t\t\tprops: { innerHTML, ...rest },\n\t\t\t},\n\t\t}: {\n\t\t\telement: any;\n\t\t} ) => {\n\t\t\t// Preserve the initial inner HTML.\n\t\t\tconst cached = useMemo( () => innerHTML, [] );\n\t\t\treturn (\n\t\t\t\t<Type\n\t\t\t\t\tdangerouslySetInnerHTML={ { __html: cached } }\n\t\t\t\t\t{ ...rest }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t);\n\n\t// data-wp-text\n\tdirective( 'text', ( { directives: { text }, element, evaluate } ) => {\n\t\tconst entry = text.find( ( { suffix } ) => suffix === 'default' );\n\t\tif ( ! entry ) {\n\t\t\telement.props.children = null;\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst result = evaluate( entry );\n\t\t\telement.props.children =\n\t\t\t\ttypeof result === 'object' ? null : result.toString();\n\t\t} catch ( e ) {\n\t\t\telement.props.children = null;\n\t\t}\n\t} );\n\n\t// data-wp-run\n\tdirective( 'run', ( { directives: { run }, evaluate } ) => {\n\t\trun.forEach( ( entry ) => evaluate( entry ) );\n\t} );\n\n\t// data-wp-each--[item]\n\tdirective(\n\t\t'each',\n\t\t( {\n\t\t\tdirectives: { each, 'each-key': eachKey },\n\t\t\tcontext: inheritedContext,\n\t\t\telement,\n\t\t\tevaluate,\n\t\t} ) => {\n\t\t\tif ( element.type !== 'template' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { Provider } = inheritedContext;\n\t\t\tconst inheritedValue = useContext( inheritedContext );\n\n\t\t\tconst [ entry ] = each;\n\t\t\tconst { namespace, suffix } = entry;\n\n\t\t\tconst list = evaluate( entry );\n\t\t\treturn list.map( ( item ) => {\n\t\t\t\tconst itemProp =\n\t\t\t\t\tsuffix === 'default' ? 'item' : kebabToCamelCase( suffix );\n\t\t\t\tconst itemContext = deepSignal( { [ namespace ]: {} } );\n\t\t\t\tconst mergedContext = proxifyContext(\n\t\t\t\t\titemContext,\n\t\t\t\t\tinheritedValue\n\t\t\t\t);\n\n\t\t\t\t// Set the item after proxifying the context.\n\t\t\t\tmergedContext[ namespace ][ itemProp ] = item;\n\n\t\t\t\tconst scope = { ...getScope(), context: mergedContext };\n\t\t\t\tconst key = eachKey\n\t\t\t\t\t? getEvaluate( { scope } )( eachKey[ 0 ] )\n\t\t\t\t\t: item;\n\n\t\t\t\treturn (\n\t\t\t\t\t<Provider value={ mergedContext } key={ key }>\n\t\t\t\t\t\t{ element.props.content }\n\t\t\t\t\t</Provider>\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\t\t{ priority: 20 }\n\t);\n\n\tdirective( 'each-child', () => null );\n};\n"],"mappings":"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","ignoreList":[]}