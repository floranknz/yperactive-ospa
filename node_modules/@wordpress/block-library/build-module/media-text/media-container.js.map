{"version":3,"names":["clsx","ResizableBox","Spinner","Placeholder","BlockControls","BlockIcon","MediaPlaceholder","MediaReplaceFlow","store","blockEditorStore","__","useViewportMatch","useDispatch","forwardRef","isBlobURL","noticesStore","media","icon","ALLOWED_MEDIA_TYPES","noop","imageFillStyles","url","focalPoint","backgroundImage","backgroundPosition","Math","round","x","y","ResizableBoxContainer","isSelected","isStackedOnMobile","props","ref","isMobile","createElement","showHandle","ToolbarEditButton","mediaId","mediaUrl","onSelectMedia","toggleUseFeaturedImage","useFeaturedImage","featuredImageURL","group","allowedTypes","accept","onSelect","onToggleFeaturedImage","PlaceholderContainer","className","createErrorNotice","onUploadError","message","type","labels","title","onError","disableMediaButtons","MediaContainer","commitWidthChange","imageFill","mediaAlt","mediaPosition","mediaType","mediaWidth","onWidthChange","enableResize","featuredImageAlt","isTemporaryMedia","toggleSelection","onResizeStart","onResize","event","direction","elt","parseInt","style","width","onResizeStop","enablePositions","right","left","backgroundStyles","mediaTypeRenderers","image","src","alt","video","controls","as","size","minWidth","maxWidth","enable","axis","withIllustration"],"sources":["@wordpress/block-library/src/media-text/media-container.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { ResizableBox, Spinner, Placeholder } from '@wordpress/components';\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaReplaceFlow,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { isBlobURL } from '@wordpress/blob';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { media as icon } from '@wordpress/icons';\n\n/**\n * Constants\n */\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video' ];\nconst noop = () => {};\n\nexport function imageFillStyles( url, focalPoint ) {\n\treturn url\n\t\t? {\n\t\t\t\tbackgroundImage: `url(${ url })`,\n\t\t\t\tbackgroundPosition: focalPoint\n\t\t\t\t\t? `${ Math.round( focalPoint.x * 100 ) }% ${ Math.round(\n\t\t\t\t\t\t\tfocalPoint.y * 100\n\t\t\t\t\t  ) }%`\n\t\t\t\t\t: `50% 50%`,\n\t\t  }\n\t\t: {};\n}\n\nconst ResizableBoxContainer = forwardRef(\n\t( { isSelected, isStackedOnMobile, ...props }, ref ) => {\n\t\tconst isMobile = useViewportMatch( 'small', '<' );\n\t\treturn (\n\t\t\t<ResizableBox\n\t\t\t\tref={ ref }\n\t\t\t\tshowHandle={\n\t\t\t\t\tisSelected && ( ! isMobile || ! isStackedOnMobile )\n\t\t\t\t}\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t);\n\t}\n);\n\nfunction ToolbarEditButton( {\n\tmediaId,\n\tmediaUrl,\n\tonSelectMedia,\n\ttoggleUseFeaturedImage,\n\tuseFeaturedImage,\n\tfeaturedImageURL,\n} ) {\n\treturn (\n\t\t<BlockControls group=\"other\">\n\t\t\t<MediaReplaceFlow\n\t\t\t\tmediaId={ mediaId }\n\t\t\t\tmediaUrl={\n\t\t\t\t\tuseFeaturedImage && featuredImageURL\n\t\t\t\t\t\t? featuredImageURL\n\t\t\t\t\t\t: mediaUrl\n\t\t\t\t}\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\taccept=\"image/*,video/*\"\n\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\tuseFeaturedImage={ useFeaturedImage }\n\t\t\t/>\n\t\t</BlockControls>\n\t);\n}\n\nfunction PlaceholderContainer( {\n\tclassName,\n\tmediaUrl,\n\tonSelectMedia,\n\ttoggleUseFeaturedImage,\n} ) {\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\n\tconst onUploadError = ( message ) => {\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t};\n\n\treturn (\n\t\t<MediaPlaceholder\n\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\tlabels={ {\n\t\t\t\ttitle: __( 'Media area' ),\n\t\t\t} }\n\t\t\tclassName={ className }\n\t\t\tonSelect={ onSelectMedia }\n\t\t\taccept=\"image/*,video/*\"\n\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\n\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\tonError={ onUploadError }\n\t\t\tdisableMediaButtons={ mediaUrl }\n\t\t/>\n\t);\n}\n\nfunction MediaContainer( props, ref ) {\n\tconst {\n\t\tclassName,\n\t\tcommitWidthChange,\n\t\tfocalPoint,\n\t\timageFill,\n\t\tisSelected,\n\t\tisStackedOnMobile,\n\t\tmediaAlt,\n\t\tmediaId,\n\t\tmediaPosition,\n\t\tmediaType,\n\t\tmediaUrl,\n\t\tmediaWidth,\n\t\tonSelectMedia,\n\t\tonWidthChange,\n\t\tenableResize,\n\t\ttoggleUseFeaturedImage,\n\t\tuseFeaturedImage,\n\t\tfeaturedImageURL,\n\t\tfeaturedImageAlt,\n\t} = props;\n\n\tconst isTemporaryMedia = ! mediaId && isBlobURL( mediaUrl );\n\n\tconst { toggleSelection } = useDispatch( blockEditorStore );\n\n\tif ( mediaUrl || featuredImageURL || useFeaturedImage ) {\n\t\tconst onResizeStart = () => {\n\t\t\ttoggleSelection( false );\n\t\t};\n\t\tconst onResize = ( event, direction, elt ) => {\n\t\t\tonWidthChange( parseInt( elt.style.width ) );\n\t\t};\n\t\tconst onResizeStop = ( event, direction, elt ) => {\n\t\t\ttoggleSelection( true );\n\t\t\tcommitWidthChange( parseInt( elt.style.width ) );\n\t\t};\n\t\tconst enablePositions = {\n\t\t\tright: enableResize && mediaPosition === 'left',\n\t\t\tleft: enableResize && mediaPosition === 'right',\n\t\t};\n\n\t\tconst backgroundStyles =\n\t\t\tmediaType === 'image' && imageFill\n\t\t\t\t? imageFillStyles( mediaUrl || featuredImageURL, focalPoint )\n\t\t\t\t: {};\n\n\t\tconst mediaTypeRenderers = {\n\t\t\timage: () =>\n\t\t\t\tuseFeaturedImage && featuredImageURL ? (\n\t\t\t\t\t<img src={ featuredImageURL } alt={ featuredImageAlt } />\n\t\t\t\t) : (\n\t\t\t\t\tmediaUrl && <img src={ mediaUrl } alt={ mediaAlt } />\n\t\t\t\t),\n\t\t\tvideo: () => <video controls src={ mediaUrl } />,\n\t\t};\n\n\t\treturn (\n\t\t\t<ResizableBoxContainer\n\t\t\t\tas=\"figure\"\n\t\t\t\tclassName={ clsx(\n\t\t\t\t\tclassName,\n\t\t\t\t\t'editor-media-container__resizer',\n\t\t\t\t\t{ 'is-transient': isTemporaryMedia }\n\t\t\t\t) }\n\t\t\t\tstyle={ backgroundStyles }\n\t\t\t\tsize={ { width: mediaWidth + '%' } }\n\t\t\t\tminWidth=\"10%\"\n\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\tenable={ enablePositions }\n\t\t\t\tonResizeStart={ onResizeStart }\n\t\t\t\tonResize={ onResize }\n\t\t\t\tonResizeStop={ onResizeStop }\n\t\t\t\taxis=\"x\"\n\t\t\t\tisSelected={ isSelected }\n\t\t\t\tisStackedOnMobile={ isStackedOnMobile }\n\t\t\t\tref={ ref }\n\t\t\t>\n\t\t\t\t<ToolbarEditButton\n\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\tmediaUrl={\n\t\t\t\t\t\tuseFeaturedImage && featuredImageURL\n\t\t\t\t\t\t\t? featuredImageURL\n\t\t\t\t\t\t\t: mediaUrl\n\t\t\t\t\t}\n\t\t\t\t\tmediaId={ mediaId }\n\t\t\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\t\tuseFeaturedImage={ useFeaturedImage }\n\t\t\t\t/>\n\t\t\t\t{ ( mediaTypeRenderers[ mediaType ] || noop )() }\n\t\t\t\t{ isTemporaryMedia && <Spinner /> }\n\t\t\t\t{ ! useFeaturedImage && <PlaceholderContainer { ...props } /> }\n\t\t\t\t{ ! featuredImageURL && useFeaturedImage && (\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\tclassName=\"wp-block-media-text--placeholder-image\"\n\t\t\t\t\t\twithIllustration\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</ResizableBoxContainer>\n\t\t);\n\t}\n\n\treturn <PlaceholderContainer { ...props } />;\n}\n\nexport default forwardRef( MediaContainer );\n"],"mappings":"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","ignoreList":[]}