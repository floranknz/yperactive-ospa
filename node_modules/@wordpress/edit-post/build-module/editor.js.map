{"version":3,"names":["useSelect","ErrorBoundary","PostLockedModal","store","editorStore","privateApis","editorPrivateApis","useMemo","SlotFillProvider","coreStore","CommandMenu","Layout","EditorInitialization","editPostStore","unlock","useNavigateToEntityRecord","ExperimentalEditorProvider","Editor","postId","initialPostId","postType","initialPostType","settings","initialEdits","props","currentPost","onNavigateToEntityRecord","onNavigateToPreviousEntityRecord","post","template","select","_getPostType$viewable","getEditedPostTemplate","getEntityRecord","getPostType","canUser","getEditorSettings","postObject","supportsTemplateMode","isViewable","viewable","canViewTemplate","editorSettings","defaultRenderingMode","initialPost","type","id","createElement","useSubRegistry","__unstableTemplate"],"sources":["@wordpress/edit-post/src/editor.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tErrorBoundary,\n\tPostLockedModal,\n\tstore as editorStore,\n\tprivateApis as editorPrivateApis,\n} from '@wordpress/editor';\nimport { useMemo } from '@wordpress/element';\nimport { SlotFillProvider } from '@wordpress/components';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { CommandMenu } from '@wordpress/commands';\n\n/**\n * Internal dependencies\n */\nimport Layout from './components/layout';\nimport EditorInitialization from './components/editor-initialization';\nimport { store as editPostStore } from './store';\nimport { unlock } from './lock-unlock';\nimport useNavigateToEntityRecord from './hooks/use-navigate-to-entity-record';\n\nconst { ExperimentalEditorProvider } = unlock( editorPrivateApis );\n\nfunction Editor( {\n\tpostId: initialPostId,\n\tpostType: initialPostType,\n\tsettings,\n\tinitialEdits,\n\t...props\n} ) {\n\tconst {\n\t\tcurrentPost,\n\t\tonNavigateToEntityRecord,\n\t\tonNavigateToPreviousEntityRecord,\n\t} = useNavigateToEntityRecord(\n\t\tinitialPostId,\n\t\tinitialPostType,\n\t\t'post-only'\n\t);\n\n\tconst { post, template } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedPostTemplate } = select( editPostStore );\n\t\t\tconst { getEntityRecord, getPostType, canUser } =\n\t\t\t\tselect( coreStore );\n\t\t\tconst { getEditorSettings } = select( editorStore );\n\n\t\t\tconst postObject = getEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\tcurrentPost.postType,\n\t\t\t\tcurrentPost.postId\n\t\t\t);\n\n\t\t\tconst supportsTemplateMode =\n\t\t\t\tgetEditorSettings().supportsTemplateMode;\n\t\t\tconst isViewable =\n\t\t\t\tgetPostType( currentPost.postType )?.viewable ?? false;\n\t\t\tconst canViewTemplate = canUser( 'read', 'templates' );\n\t\t\treturn {\n\t\t\t\ttemplate:\n\t\t\t\t\tsupportsTemplateMode &&\n\t\t\t\t\tisViewable &&\n\t\t\t\t\tcanViewTemplate &&\n\t\t\t\t\tcurrentPost.postType !== 'wp_template'\n\t\t\t\t\t\t? getEditedPostTemplate()\n\t\t\t\t\t\t: null,\n\t\t\t\tpost: postObject,\n\t\t\t};\n\t\t},\n\t\t[ currentPost.postType, currentPost.postId ]\n\t);\n\n\tconst editorSettings = useMemo(\n\t\t() => ( {\n\t\t\t...settings,\n\t\t\tonNavigateToEntityRecord,\n\t\t\tonNavigateToPreviousEntityRecord,\n\t\t\tdefaultRenderingMode: 'post-only',\n\t\t} ),\n\t\t[ settings, onNavigateToEntityRecord, onNavigateToPreviousEntityRecord ]\n\t);\n\n\tconst initialPost = useMemo( () => {\n\t\treturn {\n\t\t\ttype: initialPostType,\n\t\t\tid: initialPostId,\n\t\t};\n\t}, [ initialPostType, initialPostId ] );\n\n\tif ( ! post ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SlotFillProvider>\n\t\t\t<ExperimentalEditorProvider\n\t\t\t\tsettings={ editorSettings }\n\t\t\t\tpost={ post }\n\t\t\t\tinitialEdits={ initialEdits }\n\t\t\t\tuseSubRegistry={ false }\n\t\t\t\t__unstableTemplate={ template }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t<CommandMenu />\n\t\t\t\t\t<EditorInitialization />\n\t\t\t\t\t<Layout initialPost={ initialPost } />\n\t\t\t\t</ErrorBoundary>\n\t\t\t\t<PostLockedModal />\n\t\t\t</ExperimentalEditorProvider>\n\t\t</SlotFillProvider>\n\t);\n}\n\nexport default Editor;\n"],"mappings":"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","ignoreList":[]}