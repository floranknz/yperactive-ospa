{"version":3,"names":["_reactNative","require","_reactNativeSafeArea","_interopRequireDefault","_element","_data","_blockEditor","_compose","_components","_editor","_reactNativeBridge","_style","_style2","_header","_visualEditor","Layout","Component","constructor","arguments","onSafeAreaInsetsUpdate","bind","onRootViewLayout","state","rootViewHeight","safeAreaInsets","top","bottom","right","left","SafeArea","getSafeAreaInsetsForRootView","then","componentDidMount","_isMounted","safeAreaSubscription","addEventListener","componentWillUnmount","remove","result","setState","event","setHeightState","height","nativeEvent","layout","sendNativeEditorDidLayout","renderHTML","globalStyles","props","_react","createElement","HTMLTextInput","parentHeight","style","renderVisual","isReady","default","setTitleRef","render","getStylesFromColorScheme","mode","isHtmlView","marginBottom","Platform","OS","headerToolbarStyles","containerStyles","styles","container","containerDark","toolbarKeyboardAvoidingViewStyle","toolbarKeyboardAvoidingView","backgroundColor","editorStyles","background","backgroundDark","Tooltip","Slot","SafeAreaView","onLayout","AutosaveMonitor","disableIntervalChecks","OfflineStatus","View","FloatingToolbar","NoticeList","flex","flexBasis","KeyboardAvoidingView","withAnimatedHeight","Fragment","__unstableAutocompletionItemsSlot","BottomSheetSettings","_default","exports","compose","withSelect","select","__unstableIsEditorReady","isEditorReady","getEditorMode","editorStore","getSettings","blockEditorStore","__experimentalGlobalStylesBaseStyles","color","withPreferredColorScheme"],"sources":["@wordpress/edit-post/src/components/layout/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Platform, SafeAreaView, View } from 'react-native';\nimport SafeArea from 'react-native-safe-area';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport {\n\tBottomSheetSettings,\n\tFloatingToolbar,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport {\n\tHTMLTextInput,\n\tKeyboardAvoidingView,\n\tNoticeList,\n\tTooltip,\n\t__unstableAutocompletionItemsSlot as AutocompletionItemsSlot,\n} from '@wordpress/components';\nimport {\n\tAutosaveMonitor,\n\tOfflineStatus,\n\tstore as editorStore,\n} from '@wordpress/editor';\nimport { sendNativeEditorDidLayout } from '@wordpress/react-native-bridge';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport headerToolbarStyles from '../header/header-toolbar/style.scss';\nimport Header from '../header';\nimport VisualEditor from '../visual-editor';\n\nclass Layout extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onSafeAreaInsetsUpdate = this.onSafeAreaInsetsUpdate.bind( this );\n\t\tthis.onRootViewLayout = this.onRootViewLayout.bind( this );\n\n\t\tthis.state = {\n\t\t\trootViewHeight: 0,\n\t\t\tsafeAreaInsets: { top: 0, bottom: 0, right: 0, left: 0 },\n\t\t};\n\n\t\tSafeArea.getSafeAreaInsetsForRootView().then(\n\t\t\tthis.onSafeAreaInsetsUpdate\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis._isMounted = true;\n\t\tthis.safeAreaSubscription = SafeArea.addEventListener(\n\t\t\t'safeAreaInsetsForRootViewDidChange',\n\t\t\tthis.onSafeAreaInsetsUpdate\n\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.safeAreaSubscription?.remove();\n\t\tthis._isMounted = false;\n\t}\n\n\tonSafeAreaInsetsUpdate( result ) {\n\t\tconst { safeAreaInsets } = result;\n\t\tif ( this._isMounted ) {\n\t\t\tthis.setState( { safeAreaInsets } );\n\t\t}\n\t}\n\n\tonRootViewLayout( event ) {\n\t\tif ( this._isMounted ) {\n\t\t\tthis.setHeightState( event );\n\t\t}\n\t}\n\n\tsetHeightState( event ) {\n\t\tconst { height } = event.nativeEvent.layout;\n\t\tif ( height !== this.state.rootViewHeight ) {\n\t\t\tthis.setState(\n\t\t\t\t{ rootViewHeight: height },\n\t\t\t\tsendNativeEditorDidLayout\n\t\t\t);\n\t\t}\n\t}\n\n\trenderHTML() {\n\t\tconst { globalStyles } = this.props;\n\t\treturn (\n\t\t\t<HTMLTextInput\n\t\t\t\tparentHeight={ this.state.rootViewHeight }\n\t\t\t\tstyle={ globalStyles }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderVisual() {\n\t\tconst { isReady } = this.props;\n\n\t\tif ( ! isReady ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn <VisualEditor setTitleRef={ this.props.setTitleRef } />;\n\t}\n\n\trender() {\n\t\tconst { getStylesFromColorScheme, mode, globalStyles } = this.props;\n\n\t\tconst isHtmlView = mode === 'text';\n\n\t\t// Add a margin view at the bottom for the header.\n\t\tconst marginBottom =\n\t\t\tPlatform.OS === 'android' && ! isHtmlView\n\t\t\t\t? headerToolbarStyles[ 'header-toolbar__container' ].height\n\t\t\t\t: 0;\n\n\t\tconst containerStyles = getStylesFromColorScheme(\n\t\t\tstyles.container,\n\t\t\tstyles.containerDark\n\t\t);\n\n\t\tconst toolbarKeyboardAvoidingViewStyle = {\n\t\t\t...styles.toolbarKeyboardAvoidingView,\n\t\t\tleft: this.state.safeAreaInsets.left,\n\t\t\tright: this.state.safeAreaInsets.right,\n\t\t\tbottom: this.state.safeAreaInsets.bottom,\n\t\t\tbackgroundColor: containerStyles.backgroundColor,\n\t\t};\n\n\t\tconst editorStyles = [\n\t\t\tgetStylesFromColorScheme(\n\t\t\t\tstyles.background,\n\t\t\t\tstyles.backgroundDark\n\t\t\t),\n\t\t\tglobalStyles?.background && {\n\t\t\t\tbackgroundColor: globalStyles.background,\n\t\t\t},\n\t\t];\n\n\t\treturn (\n\t\t\t<Tooltip.Slot>\n\t\t\t\t<SafeAreaView\n\t\t\t\t\tstyle={ containerStyles }\n\t\t\t\t\tonLayout={ this.onRootViewLayout }\n\t\t\t\t>\n\t\t\t\t\t<AutosaveMonitor disableIntervalChecks />\n\t\t\t\t\t<OfflineStatus />\n\t\t\t\t\t<View style={ editorStyles }>\n\t\t\t\t\t\t{ isHtmlView ? this.renderHTML() : this.renderVisual() }\n\t\t\t\t\t\t{ ! isHtmlView && Platform.OS === 'android' && (\n\t\t\t\t\t\t\t<FloatingToolbar />\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<NoticeList />\n\t\t\t\t\t</View>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tflex: 0,\n\t\t\t\t\t\t\tflexBasis: marginBottom,\n\t\t\t\t\t\t\theight: marginBottom,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isHtmlView && (\n\t\t\t\t\t\t<KeyboardAvoidingView\n\t\t\t\t\t\t\tparentHeight={ this.state.rootViewHeight }\n\t\t\t\t\t\t\tstyle={ toolbarKeyboardAvoidingViewStyle }\n\t\t\t\t\t\t\twithAnimatedHeight\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ Platform.OS === 'ios' && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<AutocompletionItemsSlot />\n\t\t\t\t\t\t\t\t\t<FloatingToolbar />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t\t<BottomSheetSettings />\n\t\t\t\t\t\t</KeyboardAvoidingView>\n\t\t\t\t\t) }\n\t\t\t\t\t{ Platform.OS === 'android' && <AutocompletionItemsSlot /> }\n\t\t\t\t</SafeAreaView>\n\t\t\t</Tooltip.Slot>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { __unstableIsEditorReady: isEditorReady, getEditorMode } =\n\t\t\tselect( editorStore );\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst globalStyles =\n\t\t\tgetSettings()?.__experimentalGlobalStylesBaseStyles?.color;\n\n\t\treturn {\n\t\t\tisReady: isEditorReady(),\n\t\t\tmode: getEditorMode(),\n\t\t\tglobalStyles,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( Layout );\n"],"mappings":"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","ignoreList":[]}