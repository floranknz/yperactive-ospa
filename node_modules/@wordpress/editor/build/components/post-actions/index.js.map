{"version":3,"names":["_data","require","_element","_i18n","_components","_icons","_lockUnlock","_actions","_store","DropdownMenuV2","DropdownMenu","DropdownMenuGroupV2","DropdownMenuGroup","DropdownMenuItemV2","DropdownMenuItem","DropdownMenuItemLabelV2","DropdownMenuItemLabel","kebabCase","unlock","componentsPrivateApis","PostActions","onActionPerformed","buttonProps","isActionsMenuOpen","setIsActionsMenuOpen","useState","item","postType","useSelect","select","getCurrentPostType","getCurrentPost","editorStore","allActions","usePostActions","actions","useMemo","filter","action","isEligible","_react","createElement","open","trigger","Button","size","icon","moreVertical","label","__","disabled","length","__experimentalIsFocusable","className","onClick","onOpenChange","placement","ActionsDropdownMenuGroup","onClose","DropdownMenuItemTrigger","hideOnClick","RenderModal","ActionWithModal","ActionTrigger","isModalOpen","setIsModalOpen","actionTriggerProps","hideModalHeader","Fragment","Modal","title","modalHeader","__experimentalHideHeader","onRequestClose","overlayClassName","id","items","closeModal","map","key","callback"],"sources":["@wordpress/editor/src/components/post-actions/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tprivateApis as componentsPrivateApis,\n\tButton,\n\tModal,\n} from '@wordpress/components';\nimport { moreVertical } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { usePostActions } from './actions';\nimport { store as editorStore } from '../../store';\n\nconst {\n\tDropdownMenuV2: DropdownMenu,\n\tDropdownMenuGroupV2: DropdownMenuGroup,\n\tDropdownMenuItemV2: DropdownMenuItem,\n\tDropdownMenuItemLabelV2: DropdownMenuItemLabel,\n\tkebabCase,\n} = unlock( componentsPrivateApis );\n\nexport default function PostActions( { onActionPerformed, buttonProps } ) {\n\tconst [ isActionsMenuOpen, setIsActionsMenuOpen ] = useState( false );\n\tconst { item, postType } = useSelect( ( select ) => {\n\t\tconst { getCurrentPostType, getCurrentPost } = select( editorStore );\n\t\treturn {\n\t\t\titem: getCurrentPost(),\n\t\t\tpostType: getCurrentPostType(),\n\t\t};\n\t}, [] );\n\tconst allActions = usePostActions( postType, onActionPerformed );\n\n\tconst actions = useMemo( () => {\n\t\treturn allActions.filter( ( action ) => {\n\t\t\treturn ! action.isEligible || action.isEligible( item );\n\t\t} );\n\t}, [ allActions, item ] );\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\topen={ isActionsMenuOpen }\n\t\t\ttrigger={\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\tlabel={ __( 'Actions' ) }\n\t\t\t\t\tdisabled={ ! actions.length }\n\t\t\t\t\t__experimentalIsFocusable\n\t\t\t\t\tclassName=\"editor-all-actions-button\"\n\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\tsetIsActionsMenuOpen( ! isActionsMenuOpen )\n\t\t\t\t\t}\n\t\t\t\t\t{ ...buttonProps }\n\t\t\t\t/>\n\t\t\t}\n\t\t\tonOpenChange={ setIsActionsMenuOpen }\n\t\t\tplacement=\"bottom-end\"\n\t\t>\n\t\t\t<ActionsDropdownMenuGroup\n\t\t\t\tactions={ actions }\n\t\t\t\titem={ item }\n\t\t\t\tonClose={ () => {\n\t\t\t\t\tsetIsActionsMenuOpen( false );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</DropdownMenu>\n\t);\n}\n\n// From now on all the functions on this file are copied as from the dataviews packages,\n// The editor packages should not be using the dataviews packages directly,\n// and the dataviews package should not be using the editor packages directly,\n// so duplicating the code here seems like the least bad option.\n\n// Copied as is from packages/dataviews/src/item-actions.js\nfunction DropdownMenuItemTrigger( { action, onClick } ) {\n\treturn (\n\t\t<DropdownMenuItem\n\t\t\tonClick={ onClick }\n\t\t\thideOnClick={ ! action.RenderModal }\n\t\t>\n\t\t\t<DropdownMenuItemLabel>{ action.label }</DropdownMenuItemLabel>\n\t\t</DropdownMenuItem>\n\t);\n}\n\n// Copied as is from packages/dataviews/src/item-actions.js\n// With an added onClose prop.\nfunction ActionWithModal( { action, item, ActionTrigger, onClose } ) {\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\n\tconst actionTriggerProps = {\n\t\taction,\n\t\tonClick: () => setIsModalOpen( true ),\n\t};\n\tconst { RenderModal, hideModalHeader } = action;\n\treturn (\n\t\t<>\n\t\t\t<ActionTrigger { ...actionTriggerProps } />\n\t\t\t{ isModalOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={ action.modalHeader || action.label }\n\t\t\t\t\t__experimentalHideHeader={ !! hideModalHeader }\n\t\t\t\t\tonRequestClose={ () => {\n\t\t\t\t\t\tsetIsModalOpen( false );\n\t\t\t\t\t} }\n\t\t\t\t\toverlayClassName={ `editor-action-modal editor-action-modal__${ kebabCase(\n\t\t\t\t\t\taction.id\n\t\t\t\t\t) }` }\n\t\t\t\t>\n\t\t\t\t\t<RenderModal\n\t\t\t\t\t\titems={ [ item ] }\n\t\t\t\t\t\tcloseModal={ () => {\n\t\t\t\t\t\t\tsetIsModalOpen( false );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n// Copied as is from packages/dataviews/src/item-actions.js\n// With an added onClose prop.\nfunction ActionsDropdownMenuGroup( { actions, item, onClose } ) {\n\treturn (\n\t\t<DropdownMenuGroup>\n\t\t\t{ actions.map( ( action ) => {\n\t\t\t\tif ( action.RenderModal ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ActionWithModal\n\t\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tActionTrigger={ DropdownMenuItemTrigger }\n\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<DropdownMenuItemTrigger\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\tonClick={ () => action.callback( [ item ] ) }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</DropdownMenuGroup>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}