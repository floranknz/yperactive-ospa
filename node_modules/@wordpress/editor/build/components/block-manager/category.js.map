{"version":3,"names":["_element","require","_data","_compose","_components","_preferences","_checklist","_interopRequireDefault","_store","_lockUnlock","BlockManagerCategory","title","blockTypes","instanceId","useInstanceId","allowedBlockTypes","hiddenBlockTypes","useSelect","select","getEditorSettings","editorStore","get","preferencesStore","filteredBlockTypes","useMemo","filter","name","includes","showBlockTypes","hideBlockTypes","unlock","useDispatch","toggleVisible","useCallback","blockName","nextIsChecked","toggleAllVisible","blockNames","map","length","checkedBlockNames","type","titleId","isAllChecked","isIndeterminate","_react","createElement","role","className","CheckboxControl","__nextHasNoMarginBottom","checked","onChange","indeterminate","label","id","default","value","onItemChange","_default","exports"],"sources":["@wordpress/editor/src/components/block-manager/category.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMemo, useCallback } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useInstanceId } from '@wordpress/compose';\nimport { CheckboxControl } from '@wordpress/components';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesChecklist from './checklist';\nimport { store as editorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction BlockManagerCategory( { title, blockTypes } ) {\n\tconst instanceId = useInstanceId( BlockManagerCategory );\n\tconst { allowedBlockTypes, hiddenBlockTypes } = useSelect( ( select ) => {\n\t\tconst { getEditorSettings } = select( editorStore );\n\t\tconst { get } = select( preferencesStore );\n\t\treturn {\n\t\t\tallowedBlockTypes: getEditorSettings().allowedBlockTypes,\n\t\t\thiddenBlockTypes: get( 'core', 'hiddenBlockTypes' ),\n\t\t};\n\t}, [] );\n\tconst filteredBlockTypes = useMemo( () => {\n\t\tif ( allowedBlockTypes === true ) {\n\t\t\treturn blockTypes;\n\t\t}\n\t\treturn blockTypes.filter( ( { name } ) => {\n\t\t\treturn allowedBlockTypes?.includes( name );\n\t\t} );\n\t}, [ allowedBlockTypes, blockTypes ] );\n\tconst { showBlockTypes, hideBlockTypes } = unlock(\n\t\tuseDispatch( editorStore )\n\t);\n\tconst toggleVisible = useCallback(\n\t\t( blockName, nextIsChecked ) => {\n\t\t\tif ( nextIsChecked ) {\n\t\t\t\tshowBlockTypes( blockName );\n\t\t\t} else {\n\t\t\t\thideBlockTypes( blockName );\n\t\t\t}\n\t\t},\n\t\t[ showBlockTypes, hideBlockTypes ]\n\t);\n\tconst toggleAllVisible = useCallback(\n\t\t( nextIsChecked ) => {\n\t\t\tconst blockNames = blockTypes.map( ( { name } ) => name );\n\t\t\tif ( nextIsChecked ) {\n\t\t\t\tshowBlockTypes( blockNames );\n\t\t\t} else {\n\t\t\t\thideBlockTypes( blockNames );\n\t\t\t}\n\t\t},\n\t\t[ blockTypes, showBlockTypes, hideBlockTypes ]\n\t);\n\n\tif ( ! filteredBlockTypes.length ) {\n\t\treturn null;\n\t}\n\n\tconst checkedBlockNames = filteredBlockTypes\n\t\t.map( ( { name } ) => name )\n\t\t.filter( ( type ) => ! ( hiddenBlockTypes ?? [] ).includes( type ) );\n\n\tconst titleId = 'editor-block-manager__category-title-' + instanceId;\n\n\tconst isAllChecked = checkedBlockNames.length === filteredBlockTypes.length;\n\tconst isIndeterminate = ! isAllChecked && checkedBlockNames.length > 0;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"group\"\n\t\t\taria-labelledby={ titleId }\n\t\t\tclassName=\"editor-block-manager__category\"\n\t\t>\n\t\t\t<CheckboxControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tchecked={ isAllChecked }\n\t\t\t\tonChange={ toggleAllVisible }\n\t\t\t\tclassName=\"editor-block-manager__category-title\"\n\t\t\t\tindeterminate={ isIndeterminate }\n\t\t\t\tlabel={ <span id={ titleId }>{ title }</span> }\n\t\t\t/>\n\t\t\t<BlockTypesChecklist\n\t\t\t\tblockTypes={ filteredBlockTypes }\n\t\t\t\tvalue={ checkedBlockNames }\n\t\t\t\tonItemChange={ toggleVisible }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default BlockManagerCategory;\n"],"mappings":"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","ignoreList":[]}