{"version":3,"names":["_i18n","require","_element","_components","_compose","_data","_blockEditor","_utils","_store","PostVisibility","onClose","instanceId","useInstanceId","status","visibility","password","useSelect","select","editorStore","getEditedPostAttribute","getEditedPostVisibility","editPost","savePost","useDispatch","hasPassword","setHasPassword","useState","showPrivateConfirmDialog","setShowPrivateConfirmDialog","setPublic","setPrivate","confirmPrivate","handleDialogCancel","setPasswordProtected","updatePassword","event","target","value","_react","createElement","className","__experimentalInspectorPopoverHeader","title","__","help","VisuallyHidden","as","PostVisibilityChoice","label","visibilityOptions","public","info","checked","onChange","private","htmlFor","id","type","placeholder","__experimentalConfirmDialog","isOpen","onConfirm","onCancel","confirmButtonText","props","name"],"sources":["@wordpress/editor/src/components/post-visibility/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { visibilityOptions } from './utils';\nimport { store as editorStore } from '../../store';\n\nexport default function PostVisibility( { onClose } ) {\n\tconst instanceId = useInstanceId( PostVisibility );\n\n\tconst { status, visibility, password } = useSelect( ( select ) => ( {\n\t\tstatus: select( editorStore ).getEditedPostAttribute( 'status' ),\n\t\tvisibility: select( editorStore ).getEditedPostVisibility(),\n\t\tpassword: select( editorStore ).getEditedPostAttribute( 'password' ),\n\t} ) );\n\n\tconst { editPost, savePost } = useDispatch( editorStore );\n\n\tconst [ hasPassword, setHasPassword ] = useState( !! password );\n\tconst [ showPrivateConfirmDialog, setShowPrivateConfirmDialog ] =\n\t\tuseState( false );\n\n\tconst setPublic = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: '',\n\t\t} );\n\t\tsetHasPassword( false );\n\t};\n\n\tconst setPrivate = () => {\n\t\tsetShowPrivateConfirmDialog( true );\n\t};\n\n\tconst confirmPrivate = () => {\n\t\teditPost( { status: 'private', password: '' } );\n\t\tsetHasPassword( false );\n\t\tsetShowPrivateConfirmDialog( false );\n\t\tsavePost();\n\t};\n\n\tconst handleDialogCancel = () => {\n\t\tsetShowPrivateConfirmDialog( false );\n\t};\n\n\tconst setPasswordProtected = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: password || '',\n\t\t} );\n\t\tsetHasPassword( true );\n\t};\n\n\tconst updatePassword = ( event ) => {\n\t\teditPost( { password: event.target.value } );\n\t};\n\n\treturn (\n\t\t<div className=\"editor-post-visibility\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Visibility' ) }\n\t\t\t\thelp={ __( 'Control how this post is viewed.' ) }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<fieldset className=\"editor-post-visibility__fieldset\">\n\t\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t\t{ __( 'Visibility' ) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"public\"\n\t\t\t\t\tlabel={ visibilityOptions.public.label }\n\t\t\t\t\tinfo={ visibilityOptions.public.info }\n\t\t\t\t\tchecked={ visibility === 'public' && ! hasPassword }\n\t\t\t\t\tonChange={ setPublic }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"private\"\n\t\t\t\t\tlabel={ visibilityOptions.private.label }\n\t\t\t\t\tinfo={ visibilityOptions.private.info }\n\t\t\t\t\tchecked={ visibility === 'private' }\n\t\t\t\t\tonChange={ setPrivate }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"password\"\n\t\t\t\t\tlabel={ visibilityOptions.password.label }\n\t\t\t\t\tinfo={ visibilityOptions.password.info }\n\t\t\t\t\tchecked={ hasPassword }\n\t\t\t\t\tonChange={ setPasswordProtected }\n\t\t\t\t/>\n\t\t\t\t{ hasPassword && (\n\t\t\t\t\t<div className=\"editor-post-visibility__password\">\n\t\t\t\t\t\t<VisuallyHidden\n\t\t\t\t\t\t\tas=\"label\"\n\t\t\t\t\t\t\thtmlFor={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create password' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__password-input\"\n\t\t\t\t\t\t\tid={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={ updatePassword }\n\t\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\t\tplaceholder={ __( 'Use a secure password' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showPrivateConfirmDialog }\n\t\t\t\tonConfirm={ confirmPrivate }\n\t\t\t\tonCancel={ handleDialogCancel }\n\t\t\t\tconfirmButtonText={ __( 'Publish' ) }\n\t\t\t>\n\t\t\t\t{ __( 'Would you like to privately publish this post now?' ) }\n\t\t\t</ConfirmDialog>\n\t\t</div>\n\t);\n}\n\nfunction PostVisibilityChoice( { instanceId, value, label, info, ...props } ) {\n\treturn (\n\t\t<div className=\"editor-post-visibility__choice\">\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tname={ `editor-post-visibility__setting-${ instanceId }` }\n\t\t\t\tvalue={ value }\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\taria-describedby={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__radio\"\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t<label\n\t\t\t\thtmlFor={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\tclassName=\"editor-post-visibility__label\"\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</label>\n\t\t\t<p\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__info\"\n\t\t\t>\n\t\t\t\t{ info }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}