{"version":3,"names":["_data","require","_url","_element","_blockEditor","_i18n","_components","_notices","_icons","_coreData","_compose","_label","_store","PostURL","onClose","isEditable","postSlug","postLink","permalinkPrefix","permalinkSuffix","useSelect","select","_post$_links$wpActio","post","editorStore","getCurrentPost","postTypeSlug","getCurrentPostType","postType","coreStore","getPostType","permalinkParts","getPermalinkParts","hasPublishAction","_links","isPermalinkEditable","safeDecodeURIComponent","getEditedPostSlug","viewPostLabel","labels","view_item","link","prefix","suffix","editPost","useDispatch","createNotice","noticesStore","forceEmptyField","setForceEmptyField","useState","postUrlLabel","usePostURLLabel","copyButtonRef","useCopyToClipboard","__","isDismissible","type","_react","createElement","className","__experimentalInspectorPopoverHeader","title","__experimentalVStack","spacing","ExternalLink","href","__experimentalInputControl","__next40pxDefaultSize","__experimentalInputControlPrefixWrapper","Button","icon","copySmall","ref","label","hideLabelFromVision","value","autoComplete","spellCheck","onChange","newValue","slug","onBlur","event","cleanForSlug","target","help"],"sources":["@wordpress/editor/src/components/post-url/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { safeDecodeURIComponent, cleanForSlug } from '@wordpress/url';\nimport { useState } from '@wordpress/element';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tExternalLink,\n\tButton,\n\t__experimentalInputControl as InputControl,\n\t__experimentalInputControlPrefixWrapper as InputControlPrefixWrapper,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { copySmall } from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { useCopyToClipboard } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { usePostURLLabel } from './label';\nimport { store as editorStore } from '../../store';\n\nexport default function PostURL( { onClose } ) {\n\tconst { isEditable, postSlug, postLink, permalinkPrefix, permalinkSuffix } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst post = select( editorStore ).getCurrentPost();\n\t\t\tconst postTypeSlug = select( editorStore ).getCurrentPostType();\n\t\t\tconst postType = select( coreStore ).getPostType( postTypeSlug );\n\t\t\tconst permalinkParts = select( editorStore ).getPermalinkParts();\n\t\t\tconst hasPublishAction =\n\t\t\t\tpost?._links?.[ 'wp:action-publish' ] ?? false;\n\n\t\t\treturn {\n\t\t\t\tisEditable:\n\t\t\t\t\tselect( editorStore ).isPermalinkEditable() &&\n\t\t\t\t\thasPublishAction,\n\t\t\t\tpostSlug: safeDecodeURIComponent(\n\t\t\t\t\tselect( editorStore ).getEditedPostSlug()\n\t\t\t\t),\n\t\t\t\tviewPostLabel: postType?.labels.view_item,\n\t\t\t\tpostLink: post.link,\n\t\t\t\tpermalinkPrefix: permalinkParts?.prefix,\n\t\t\t\tpermalinkSuffix: permalinkParts?.suffix,\n\t\t\t};\n\t\t}, [] );\n\tconst { editPost } = useDispatch( editorStore );\n\tconst { createNotice } = useDispatch( noticesStore );\n\tconst [ forceEmptyField, setForceEmptyField ] = useState( false );\n\tconst postUrlLabel = usePostURLLabel();\n\tconst copyButtonRef = useCopyToClipboard( postUrlLabel, () => {\n\t\tcreateNotice( 'info', __( 'Copied URL to clipboard.' ), {\n\t\t\tisDismissible: true,\n\t\t\ttype: 'snackbar',\n\t\t} );\n\t} );\n\treturn (\n\t\t<div className=\"editor-post-url\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Link' ) }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<VStack spacing={ 3 }>\n\t\t\t\t{ isEditable && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{ __( 'Customize the last part of the URL. ' ) }\n\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/page-post-settings-sidebar/#permalink'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Learn more.' ) }\n\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t<div>\n\t\t\t\t\t{ isEditable && (\n\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tprefix={\n\t\t\t\t\t\t\t\t<InputControlPrefixWrapper>\n\t\t\t\t\t\t\t\t\t/\n\t\t\t\t\t\t\t\t</InputControlPrefixWrapper>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticon={ copySmall }\n\t\t\t\t\t\t\t\t\tref={ copyButtonRef }\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Copy' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tvalue={ forceEmptyField ? '' : postSlug }\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"editor-post-url__input\"\n\t\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\t\teditPost( { slug: newValue } );\n\t\t\t\t\t\t\t\t// When we delete the field the permalink gets\n\t\t\t\t\t\t\t\t// reverted to the original value.\n\t\t\t\t\t\t\t\t// The forceEmptyField logic allows the user to have\n\t\t\t\t\t\t\t\t// the field temporarily empty while typing.\n\t\t\t\t\t\t\t\tif ( ! newValue ) {\n\t\t\t\t\t\t\t\t\tif ( ! forceEmptyField ) {\n\t\t\t\t\t\t\t\t\t\tsetForceEmptyField( true );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( forceEmptyField ) {\n\t\t\t\t\t\t\t\t\tsetForceEmptyField( false );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonBlur={ ( event ) => {\n\t\t\t\t\t\t\t\teditPost( {\n\t\t\t\t\t\t\t\t\tslug: cleanForSlug( event.target.value ),\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\tif ( forceEmptyField ) {\n\t\t\t\t\t\t\t\t\tsetForceEmptyField( false );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\tclassName=\"editor-post-url__link\"\n\t\t\t\t\t\t\t\t\thref={ postLink }\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"editor-post-url__link-prefix\">\n\t\t\t\t\t\t\t\t\t\t{ permalinkPrefix }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"editor-post-url__link-slug\">\n\t\t\t\t\t\t\t\t\t\t{ postSlug }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"editor-post-url__link-suffix\">\n\t\t\t\t\t\t\t\t\t\t{ permalinkSuffix }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! isEditable && (\n\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\tclassName=\"editor-post-url__link\"\n\t\t\t\t\t\t\thref={ postLink }\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ postLink }\n\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</VStack>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}