{"version":3,"names":["_components","require","_i18n","_data","_element","_store","PostSwitchToDraftButton","showConfirmDialog","setShowConfirmDialog","useState","editPost","savePost","useDispatch","editorStore","isSaving","isPublished","isScheduled","useSelect","select","isSavingPost","isCurrentPostPublished","isCurrentPostScheduled","isDisabled","alertMessage","confirmButtonText","__","handleConfirm","status","_react","createElement","Fragment","Button","__next40pxDefaultSize","className","onClick","variant","style","flexGrow","justifyContent","__experimentalConfirmDialog","isOpen","onConfirm","onCancel"],"sources":["@wordpress/editor/src/components/post-switch-to-draft-button/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\n\n// TODO: deprecate..\nexport default function PostSwitchToDraftButton() {\n\tconst [ showConfirmDialog, setShowConfirmDialog ] = useState( false );\n\n\tconst { editPost, savePost } = useDispatch( editorStore );\n\tconst { isSaving, isPublished, isScheduled } = useSelect( ( select ) => {\n\t\tconst { isSavingPost, isCurrentPostPublished, isCurrentPostScheduled } =\n\t\t\tselect( editorStore );\n\t\treturn {\n\t\t\tisSaving: isSavingPost(),\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t\tisScheduled: isCurrentPostScheduled(),\n\t\t};\n\t}, [] );\n\n\tconst isDisabled = isSaving || ( ! isPublished && ! isScheduled );\n\n\tlet alertMessage;\n\tlet confirmButtonText;\n\tif ( isPublished ) {\n\t\talertMessage = __( 'Are you sure you want to unpublish this post?' );\n\t\tconfirmButtonText = __( 'Unpublish' );\n\t} else if ( isScheduled ) {\n\t\talertMessage = __( 'Are you sure you want to unschedule this post?' );\n\t\tconfirmButtonText = __( 'Unschedule' );\n\t}\n\n\tconst handleConfirm = () => {\n\t\tsetShowConfirmDialog( false );\n\t\teditPost( { status: 'draft' } );\n\t\tsavePost();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tclassName=\"editor-post-switch-to-draft\"\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tif ( ! isDisabled ) {\n\t\t\t\t\t\tsetShowConfirmDialog( true );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tstyle={ { flexGrow: '1', justifyContent: 'center' } }\n\t\t\t>\n\t\t\t\t{ __( 'Switch to draft' ) }\n\t\t\t</Button>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showConfirmDialog }\n\t\t\t\tonConfirm={ handleConfirm }\n\t\t\t\tonCancel={ () => setShowConfirmDialog( false ) }\n\t\t\t\tconfirmButtonText={ confirmButtonText }\n\t\t\t>\n\t\t\t\t{ alertMessage }\n\t\t\t</ConfirmDialog>\n\t\t</>\n\t);\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,WAAA,GAAAC,OAAA;AAIA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AAKA,IAAAI,MAAA,GAAAJ,OAAA;AAdA;AACA;AACA;;AASA;AACA;AACA;;AAGA;AACe,SAASK,uBAAuBA,CAAA,EAAG;EACjD,MAAM,CAAEC,iBAAiB,EAAEC,oBAAoB,CAAE,GAAG,IAAAC,iBAAQ,EAAE,KAAM,CAAC;EAErE,MAAM;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAG,IAAAC,iBAAW,EAAEC,YAAY,CAAC;EACzD,MAAM;IAAEC,QAAQ;IAAEC,WAAW;IAAEC;EAAY,CAAC,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IACvE,MAAM;MAAEC,YAAY;MAAEC,sBAAsB;MAAEC;IAAuB,CAAC,GACrEH,MAAM,CAAEL,YAAY,CAAC;IACtB,OAAO;MACNC,QAAQ,EAAEK,YAAY,CAAC,CAAC;MACxBJ,WAAW,EAAEK,sBAAsB,CAAC,CAAC;MACrCJ,WAAW,EAAEK,sBAAsB,CAAC;IACrC,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,MAAMC,UAAU,GAAGR,QAAQ,IAAM,CAAEC,WAAW,IAAI,CAAEC,WAAa;EAEjE,IAAIO,YAAY;EAChB,IAAIC,iBAAiB;EACrB,IAAKT,WAAW,EAAG;IAClBQ,YAAY,GAAG,IAAAE,QAAE,EAAE,+CAAgD,CAAC;IACpED,iBAAiB,GAAG,IAAAC,QAAE,EAAE,WAAY,CAAC;EACtC,CAAC,MAAM,IAAKT,WAAW,EAAG;IACzBO,YAAY,GAAG,IAAAE,QAAE,EAAE,gDAAiD,CAAC;IACrED,iBAAiB,GAAG,IAAAC,QAAE,EAAE,YAAa,CAAC;EACvC;EAEA,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC3BlB,oBAAoB,CAAE,KAAM,CAAC;IAC7BE,QAAQ,CAAE;MAAEiB,MAAM,EAAE;IAAQ,CAAE,CAAC;IAC/BhB,QAAQ,CAAC,CAAC;EACX,CAAC;EAED,OACC,IAAAiB,MAAA,CAAAC,aAAA,EAAAD,MAAA,CAAAE,QAAA,QACC,IAAAF,MAAA,CAAAC,aAAA,EAAC7B,WAAA,CAAA+B,MAAM;IACNC,qBAAqB;IACrBC,SAAS,EAAC,6BAA6B;IACvCC,OAAO,EAAGA,CAAA,KAAM;MACf,IAAK,CAAEZ,UAAU,EAAG;QACnBd,oBAAoB,CAAE,IAAK,CAAC;MAC7B;IACD,CAAG;IACH,iBAAgBc,UAAY;IAC5Ba,OAAO,EAAC,WAAW;IACnBC,KAAK,EAAG;MAAEC,QAAQ,EAAE,GAAG;MAAEC,cAAc,EAAE;IAAS;EAAG,GAEnD,IAAAb,QAAE,EAAE,iBAAkB,CACjB,CAAC,EACT,IAAAG,MAAA,CAAAC,aAAA,EAAC7B,WAAA,CAAAuC,2BAAa;IACbC,MAAM,EAAGjC,iBAAmB;IAC5BkC,SAAS,EAAGf,aAAe;IAC3BgB,QAAQ,EAAGA,CAAA,KAAMlC,oBAAoB,CAAE,KAAM,CAAG;IAChDgB,iBAAiB,EAAGA;EAAmB,GAErCD,YACY,CACd,CAAC;AAEL","ignoreList":[]}