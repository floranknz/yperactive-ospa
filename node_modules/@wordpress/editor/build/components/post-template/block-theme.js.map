{"version":3,"names":["_data","require","_htmlEntities","_components","_i18n","_coreData","_icons","_notices","_store","_swapTemplateButton","_interopRequireDefault","_resetDefaultTemplate","_lockUnlock","_createNewTemplate","POPOVER_PROPS","className","placement","BlockThemeControl","id","isTemplateHidden","onNavigateToEntityRecord","getEditorSettings","hasGoBack","useSelect","select","getRenderingMode","_getEditorSettings","unlock","editorStore","editorSettings","hasOwnProperty","editedRecord","template","hasResolved","useEntityRecord","createSuccessNotice","useDispatch","noticesStore","setRenderingMode","canCreateTemplate","_select$canUser","coreStore","canUser","notificationAction","label","__","onClick","onNavigateToPreviousEntityRecord","undefined","_react","createElement","DropdownMenu","popoverProps","focusOnMount","toggleProps","size","variant","text","decodeEntities","title","icon","onClose","Fragment","MenuGroup","MenuItem","postId","postType","type","actions","default","check","isSelected","role"],"sources":["@wordpress/editor/src/components/post-template/block-theme.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useEntityRecord, store as coreStore } from '@wordpress/core-data';\nimport { check } from '@wordpress/icons';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\nimport SwapTemplateButton from './swap-template-button';\nimport ResetDefaultTemplate from './reset-default-template';\nimport { unlock } from '../../lock-unlock';\nimport CreateNewTemplate from './create-new-template';\n\nconst POPOVER_PROPS = {\n\tclassName: 'editor-post-template__dropdown',\n\tplacement: 'bottom-start',\n};\n\nexport default function BlockThemeControl( { id } ) {\n\tconst {\n\t\tisTemplateHidden,\n\t\tonNavigateToEntityRecord,\n\t\tgetEditorSettings,\n\t\thasGoBack,\n\t} = useSelect( ( select ) => {\n\t\tconst { getRenderingMode, getEditorSettings: _getEditorSettings } =\n\t\t\tunlock( select( editorStore ) );\n\t\tconst editorSettings = _getEditorSettings();\n\t\treturn {\n\t\t\tisTemplateHidden: getRenderingMode() === 'post-only',\n\t\t\tonNavigateToEntityRecord: editorSettings.onNavigateToEntityRecord,\n\t\t\tgetEditorSettings: _getEditorSettings,\n\t\t\thasGoBack: editorSettings.hasOwnProperty(\n\t\t\t\t'onNavigateToPreviousEntityRecord'\n\t\t\t),\n\t\t};\n\t}, [] );\n\n\tconst { editedRecord: template, hasResolved } = useEntityRecord(\n\t\t'postType',\n\t\t'wp_template',\n\t\tid\n\t);\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\tconst { setRenderingMode } = useDispatch( editorStore );\n\n\tconst canCreateTemplate = useSelect(\n\t\t( select ) =>\n\t\t\tselect( coreStore ).canUser( 'create', 'templates' ) ?? false\n\t);\n\n\tif ( ! hasResolved ) {\n\t\treturn null;\n\t}\n\n\t// The site editor does not have a `onNavigateToPreviousEntityRecord` setting as it uses its own routing\n\t// and assigns its own backlink to focusMode pages.\n\tconst notificationAction = hasGoBack\n\t\t? [\n\t\t\t\t{\n\t\t\t\t\tlabel: __( 'Go back' ),\n\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\tgetEditorSettings().onNavigateToPreviousEntityRecord(),\n\t\t\t\t},\n\t\t  ]\n\t\t: undefined;\n\treturn (\n\t\t<DropdownMenu\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\tfocusOnMount\n\t\t\ttoggleProps={ {\n\t\t\t\tsize: 'compact',\n\t\t\t\tvariant: 'tertiary',\n\t\t\t} }\n\t\t\tlabel={ __( 'Template options' ) }\n\t\t\ttext={ decodeEntities( template.title ) }\n\t\t\ticon={ null }\n\t\t>\n\t\t\t{ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t{ canCreateTemplate && (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tonNavigateToEntityRecord( {\n\t\t\t\t\t\t\t\t\t\tpostId: template.id,\n\t\t\t\t\t\t\t\t\t\tpostType: 'wp_template',\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t\t'Editing template. Changes made here affect all posts and pages that use the template.'\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t\t\t\t\t\t\tactions: notificationAction,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Edit template' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<SwapTemplateButton onClick={ onClose } />\n\t\t\t\t\t\t<ResetDefaultTemplate onClick={ onClose } />\n\t\t\t\t\t\t{ canCreateTemplate && (\n\t\t\t\t\t\t\t<CreateNewTemplate onClick={ onClose } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\ticon={ ! isTemplateHidden ? check : undefined }\n\t\t\t\t\t\t\tisSelected={ ! isTemplateHidden }\n\t\t\t\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tsetRenderingMode(\n\t\t\t\t\t\t\t\t\tisTemplateHidden\n\t\t\t\t\t\t\t\t\t\t? 'template-locked'\n\t\t\t\t\t\t\t\t\t\t: 'post-only'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Show template' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}