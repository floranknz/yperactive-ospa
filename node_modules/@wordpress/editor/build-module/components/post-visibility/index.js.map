{"version":3,"names":["__","useState","VisuallyHidden","__experimentalConfirmDialog","ConfirmDialog","useInstanceId","useSelect","useDispatch","__experimentalInspectorPopoverHeader","InspectorPopoverHeader","visibilityOptions","store","editorStore","PostVisibility","onClose","instanceId","status","visibility","password","select","getEditedPostAttribute","getEditedPostVisibility","editPost","savePost","hasPassword","setHasPassword","showPrivateConfirmDialog","setShowPrivateConfirmDialog","setPublic","setPrivate","confirmPrivate","handleDialogCancel","setPasswordProtected","updatePassword","event","target","value","createElement","className","title","help","as","PostVisibilityChoice","label","public","info","checked","onChange","private","htmlFor","id","type","placeholder","isOpen","onConfirm","onCancel","confirmButtonText","props","name"],"sources":["@wordpress/editor/src/components/post-visibility/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { visibilityOptions } from './utils';\nimport { store as editorStore } from '../../store';\n\nexport default function PostVisibility( { onClose } ) {\n\tconst instanceId = useInstanceId( PostVisibility );\n\n\tconst { status, visibility, password } = useSelect( ( select ) => ( {\n\t\tstatus: select( editorStore ).getEditedPostAttribute( 'status' ),\n\t\tvisibility: select( editorStore ).getEditedPostVisibility(),\n\t\tpassword: select( editorStore ).getEditedPostAttribute( 'password' ),\n\t} ) );\n\n\tconst { editPost, savePost } = useDispatch( editorStore );\n\n\tconst [ hasPassword, setHasPassword ] = useState( !! password );\n\tconst [ showPrivateConfirmDialog, setShowPrivateConfirmDialog ] =\n\t\tuseState( false );\n\n\tconst setPublic = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: '',\n\t\t} );\n\t\tsetHasPassword( false );\n\t};\n\n\tconst setPrivate = () => {\n\t\tsetShowPrivateConfirmDialog( true );\n\t};\n\n\tconst confirmPrivate = () => {\n\t\teditPost( { status: 'private', password: '' } );\n\t\tsetHasPassword( false );\n\t\tsetShowPrivateConfirmDialog( false );\n\t\tsavePost();\n\t};\n\n\tconst handleDialogCancel = () => {\n\t\tsetShowPrivateConfirmDialog( false );\n\t};\n\n\tconst setPasswordProtected = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: password || '',\n\t\t} );\n\t\tsetHasPassword( true );\n\t};\n\n\tconst updatePassword = ( event ) => {\n\t\teditPost( { password: event.target.value } );\n\t};\n\n\treturn (\n\t\t<div className=\"editor-post-visibility\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Visibility' ) }\n\t\t\t\thelp={ __( 'Control how this post is viewed.' ) }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<fieldset className=\"editor-post-visibility__fieldset\">\n\t\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t\t{ __( 'Visibility' ) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"public\"\n\t\t\t\t\tlabel={ visibilityOptions.public.label }\n\t\t\t\t\tinfo={ visibilityOptions.public.info }\n\t\t\t\t\tchecked={ visibility === 'public' && ! hasPassword }\n\t\t\t\t\tonChange={ setPublic }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"private\"\n\t\t\t\t\tlabel={ visibilityOptions.private.label }\n\t\t\t\t\tinfo={ visibilityOptions.private.info }\n\t\t\t\t\tchecked={ visibility === 'private' }\n\t\t\t\t\tonChange={ setPrivate }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"password\"\n\t\t\t\t\tlabel={ visibilityOptions.password.label }\n\t\t\t\t\tinfo={ visibilityOptions.password.info }\n\t\t\t\t\tchecked={ hasPassword }\n\t\t\t\t\tonChange={ setPasswordProtected }\n\t\t\t\t/>\n\t\t\t\t{ hasPassword && (\n\t\t\t\t\t<div className=\"editor-post-visibility__password\">\n\t\t\t\t\t\t<VisuallyHidden\n\t\t\t\t\t\t\tas=\"label\"\n\t\t\t\t\t\t\thtmlFor={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create password' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__password-input\"\n\t\t\t\t\t\t\tid={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={ updatePassword }\n\t\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\t\tplaceholder={ __( 'Use a secure password' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showPrivateConfirmDialog }\n\t\t\t\tonConfirm={ confirmPrivate }\n\t\t\t\tonCancel={ handleDialogCancel }\n\t\t\t\tconfirmButtonText={ __( 'Publish' ) }\n\t\t\t>\n\t\t\t\t{ __( 'Would you like to privately publish this post now?' ) }\n\t\t\t</ConfirmDialog>\n\t\t</div>\n\t);\n}\n\nfunction PostVisibilityChoice( { instanceId, value, label, info, ...props } ) {\n\treturn (\n\t\t<div className=\"editor-post-visibility__choice\">\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tname={ `editor-post-visibility__setting-${ instanceId }` }\n\t\t\t\tvalue={ value }\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\taria-describedby={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__radio\"\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t<label\n\t\t\t\thtmlFor={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\tclassName=\"editor-post-visibility__label\"\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</label>\n\t\t\t<p\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__info\"\n\t\t\t>\n\t\t\t\t{ info }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}