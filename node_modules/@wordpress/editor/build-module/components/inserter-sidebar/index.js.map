{"version":3,"names":["useDispatch","useSelect","__experimentalLibrary","Library","store","blockEditorStore","useViewportMatch","useCallback","useRef","preferencesStore","ESCAPE","unlock","editorStore","InserterSidebar","closeGeneralSidebar","isRightSidebarOpen","blockSectionRootClientId","inserterSidebarToggleRef","insertionPoint","showMostUsedBlocks","select","getInserterSidebarToggleRef","getInsertionPoint","getBlockRootClientId","__unstableGetEditorMode","getSettings","get","getBlockSectionRootClientId","sectionRootClientId","setIsInserterOpened","isMobileViewport","libraryRef","closeInserterSidebar","current","focus","closeOnEscape","event","keyCode","defaultPrevented","preventDefault","createElement","onKeyDown","className","showInserterHelpPanel","shouldFocusBlock","rootClientId","__experimentalInsertionIndex","insertionIndex","__experimentalInitialTab","tab","__experimentalInitialCategory","category","__experimentalFilterValue","filterValue","__experimentalOnPatternCategorySelection","undefined","ref","onClose"],"sources":["@wordpress/editor/src/components/inserter-sidebar/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\t__experimentalLibrary as Library,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useCallback, useRef } from '@wordpress/element';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { store as editorStore } from '../../store';\n\nexport default function InserterSidebar( {\n\tcloseGeneralSidebar,\n\tisRightSidebarOpen,\n} ) {\n\tconst {\n\t\tblockSectionRootClientId,\n\t\tinserterSidebarToggleRef,\n\t\tinsertionPoint,\n\t\tshowMostUsedBlocks,\n\t} = useSelect( ( select ) => {\n\t\tconst { getInserterSidebarToggleRef, getInsertionPoint } = unlock(\n\t\t\tselect( editorStore )\n\t\t);\n\t\tconst { getBlockRootClientId, __unstableGetEditorMode, getSettings } =\n\t\t\tselect( blockEditorStore );\n\t\tconst { get } = select( preferencesStore );\n\t\tconst getBlockSectionRootClientId = () => {\n\t\t\tif ( __unstableGetEditorMode() === 'zoom-out' ) {\n\t\t\t\tconst { sectionRootClientId } = unlock( getSettings() );\n\t\t\t\tif ( sectionRootClientId ) {\n\t\t\t\t\treturn sectionRootClientId;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn getBlockRootClientId();\n\t\t};\n\t\treturn {\n\t\t\tinserterSidebarToggleRef: getInserterSidebarToggleRef(),\n\t\t\tinsertionPoint: getInsertionPoint(),\n\t\t\tshowMostUsedBlocks: get( 'core', 'mostUsedBlocks' ),\n\t\t\tblockSectionRootClientId: getBlockSectionRootClientId(),\n\t\t};\n\t}, [] );\n\tconst { setIsInserterOpened } = useDispatch( editorStore );\n\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst libraryRef = useRef();\n\n\t// When closing the inserter, focus should return to the toggle button.\n\tconst closeInserterSidebar = useCallback( () => {\n\t\tsetIsInserterOpened( false );\n\t\tinserterSidebarToggleRef.current?.focus();\n\t}, [ inserterSidebarToggleRef, setIsInserterOpened ] );\n\n\tconst closeOnEscape = useCallback(\n\t\t( event ) => {\n\t\t\tif ( event.keyCode === ESCAPE && ! event.defaultPrevented ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcloseInserterSidebar();\n\t\t\t}\n\t\t},\n\t\t[ closeInserterSidebar ]\n\t);\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div onKeyDown={ closeOnEscape } className=\"editor-inserter-sidebar\">\n\t\t\t<div className=\"editor-inserter-sidebar__content\">\n\t\t\t\t<Library\n\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\tshowInserterHelpPanel\n\t\t\t\t\tshouldFocusBlock={ isMobileViewport }\n\t\t\t\t\trootClientId={\n\t\t\t\t\t\tblockSectionRootClientId ?? insertionPoint.rootClientId\n\t\t\t\t\t}\n\t\t\t\t\t__experimentalInsertionIndex={\n\t\t\t\t\t\tinsertionPoint.insertionIndex\n\t\t\t\t\t}\n\t\t\t\t\t__experimentalInitialTab={ insertionPoint.tab }\n\t\t\t\t\t__experimentalInitialCategory={ insertionPoint.category }\n\t\t\t\t\t__experimentalFilterValue={ insertionPoint.filterValue }\n\t\t\t\t\t__experimentalOnPatternCategorySelection={\n\t\t\t\t\t\tisRightSidebarOpen ? closeGeneralSidebar : undefined\n\t\t\t\t\t}\n\t\t\t\t\tref={ libraryRef }\n\t\t\t\t\tonClose={ closeInserterSidebar }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}